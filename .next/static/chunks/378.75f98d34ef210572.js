"use strict";(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[378],{4474:(e,s,t)=>{t.d(s,{$:()=>d});var a=t(95155);t(12115);var r=t(42442),n=t(18460),l=t(91337);let i=(0,n.F)("inline-flex items-center justify-center gap-2 whitespace-nowrap rounded-md text-sm font-medium transition-all disabled:pointer-events-none disabled:opacity-50 [&_svg]:pointer-events-none [&_svg:not([class*='size-'])]:size-4 shrink-0 [&_svg]:shrink-0 outline-none focus-visible:border-ring focus-visible:ring-ring/50 focus-visible:ring-[3px] aria-invalid:ring-destructive/20 dark:aria-invalid:ring-destructive/40 aria-invalid:border-destructive",{variants:{variant:{default:"bg-primary text-primary-foreground hover:bg-primary/90",destructive:"bg-destructive text-white hover:bg-destructive/90 focus-visible:ring-destructive/20 dark:focus-visible:ring-destructive/40 dark:bg-destructive/60",outline:"border bg-background shadow-xs hover:bg-accent hover:text-accent-foreground dark:bg-input/30 dark:border-input dark:hover:bg-input/50",secondary:"bg-secondary text-secondary-foreground hover:bg-secondary/80",ghost:"hover:bg-accent hover:text-accent-foreground dark:hover:bg-accent/50",link:"text-primary underline-offset-4 hover:underline"},size:{default:"h-9 px-4 py-2 has-[>svg]:px-3",sm:"h-8 rounded-md gap-1.5 px-3 has-[>svg]:px-2.5",lg:"h-10 rounded-md px-6 has-[>svg]:px-4",icon:"size-9","icon-sm":"size-8","icon-lg":"size-10"}},defaultVariants:{variant:"default",size:"default"}});function d({className:e,variant:s,size:t,asChild:n=!1,...d}){let o=n?r.DX:"button";return(0,a.jsx)(o,{"data-slot":"button",className:(0,l.cn)(i({variant:s,size:t,className:e})),...d})}},15306:(e,s,t)=>{t.d(s,{Xi:()=>d,av:()=>o,j7:()=>i,tU:()=>l});var a=t(95155);t(12115);var r=t(57518),n=t(91337);function l({className:e,...s}){return(0,a.jsx)(r.bL,{"data-slot":"tabs",className:(0,n.cn)("flex flex-col gap-2",e),...s})}function i({className:e,...s}){return(0,a.jsx)(r.B8,{"data-slot":"tabs-list",className:(0,n.cn)("bg-muted text-muted-foreground inline-flex h-9 w-fit items-center justify-center rounded-lg p-[3px]",e),...s})}function d({className:e,...s}){return(0,a.jsx)(r.l9,{"data-slot":"tabs-trigger",className:(0,n.cn)("data-[state=active]:bg-background dark:data-[state=active]:text-foreground focus-visible:border-ring focus-visible:ring-ring/50 focus-visible:outline-ring dark:data-[state=active]:border-input dark:data-[state=active]:bg-input/30 text-foreground dark:text-muted-foreground inline-flex h-[calc(100%-1px)] flex-1 items-center justify-center gap-1.5 rounded-md border border-transparent px-2 py-1 text-sm font-medium whitespace-nowrap transition-[color,box-shadow] focus-visible:ring-[3px] focus-visible:outline-1 disabled:pointer-events-none disabled:opacity-50 data-[state=active]:shadow-sm [&_svg]:pointer-events-none [&_svg]:shrink-0 [&_svg:not([class*='size-'])]:size-4",e),...s})}function o({className:e,...s}){return(0,a.jsx)(r.UC,{"data-slot":"tabs-content",className:(0,n.cn)("flex-1 outline-none",e),...s})}},41693:(e,s,t)=>{t.d(s,{O:()=>i});var a=t(95155),r=t(37206),n=t(12115);let l=(0,r.default)(()=>Promise.all([t.e(9338),t.e(1300),t.e(8349),t.e(1018),t.e(1886),t.e(3623),t.e(6917),t.e(9619)]).then(t.bind(t,19619)).then(e=>e.TrackRowClient),{loadableGenerated:{webpack:()=>[19619]},ssr:!1}),i=(0,n.memo)(function(e){return(0,a.jsx)(l,{...e})})},46400:(e,s,t)=>{t.d(s,{F:()=>n,T:()=>r});var a=t(12115);let r=(0,a.createContext)(void 0);function n(){let e=(0,a.useContext)(r);if(void 0===e)throw Error("usePlayer must be used within a PlayerProvider");return e}},50378:(e,s,t)=>{t.r(s),t.d(s,{default:()=>w});var a=t(95155),r=t(12115),n=t(23623),l=t(94674),i=t(46400),d=t(81890),o=t(41693),c=t(4474),u=t(15306),x=t(7686),m=t(84980),h=t(6962),g=t(20232),f=t(65903);function v(){return null}var p=t(7236),b=t(56995);function w(){let[e,s]=(0,r.useState)("liked"),[t,w]=(0,r.useState)([]),[N,y]=(0,r.useState)([]),[k,S]=(0,r.useState)([]),[A,D]=(0,r.useState)(!0),[C,z]=(0,r.useState)(new Set),[$,P]=(0,r.useState)(new Set),{playQueue:_,shuffleQueue:E}=(0,i.F)(),{toast:L}=(0,d.d)(),[F,O]=(0,r.useState)(!1);(0,r.useEffect)(()=>{O(!0)},[]),(0,r.useEffect)(()=>{F&&async function(){D(!0);try{let[e,s,t]=await Promise.all([(0,n.cZ)(),(0,n.aq)(),(0,l.WR)()]);w(e),y(s),S(t);let a=new Set(t.map(e=>e.id));P(a)}catch(e){console.error("[v0] Error loading library:",e)}finally{D(!1)}}()},[F]);let R=e=>{e.length>0&&_(e)},U=e=>{e.length>0&&(_(e),E())},X=async e=>{if($.has(e.id))return void L({title:"Already Downloaded",description:"This track is already in your library."});z(s=>new Set(s).add(e.id));try{await (0,l.UB)(e,s=>{console.log(`[v0] Download progress for ${e.id}: ${s}%`)}),P(s=>new Set(s).add(e.id));let s=await (0,l.WR)();S(s);let{data:{user:t}}=await p.N.auth.getUser();t&&await (0,b.nL)(e,{offline:!0}),L({title:"Success",description:`"${e.title}" downloaded successfully!`})}catch(s){console.error("[v0] Download error:",s),L({title:"Download Failed",description:`Failed to download "${e.title}". Try again later.`,variant:"destructive"})}finally{z(s=>{let t=new Set(s);return t.delete(e.id),t})}};return A||!F?(0,a.jsx)(v,{}):(0,a.jsx)(r.Suspense,{fallback:(0,a.jsx)(v,{}),children:(0,a.jsxs)("div",{className:"space-y-6",children:[(0,a.jsx)("h1",{className:"text-3xl font-bold text-foreground",children:"Your Library"}),(0,a.jsxs)(u.tU,{value:e,onValueChange:s,className:"w-full",children:[(0,a.jsxs)(u.j7,{className:"bg-secondary/50 p-1",children:[(0,a.jsxs)(u.Xi,{value:"liked",className:"data-[state=active]:bg-card gap-2",children:[(0,a.jsx)(x.A,{className:"w-4 h-4"}),"Liked Songs"]}),(0,a.jsxs)(u.Xi,{value:"recent",className:"data-[state=active]:bg-card gap-2",children:[(0,a.jsx)(m.A,{className:"w-4 h-4"}),"Recently Played"]}),(0,a.jsxs)(u.Xi,{value:"downloads",className:"data-[state=active]:bg-card gap-2",children:[(0,a.jsx)(h.A,{className:"w-4 h-4"}),"Downloads"]})]}),(0,a.jsx)(u.av,{value:"liked",className:"mt-6",children:t.length>0?(0,a.jsxs)("div",{className:"space-y-4",children:[(0,a.jsxs)("div",{className:"flex items-end gap-6 p-6 rounded-lg bg-linear-to-br from-purple-700/50 to-blue-600/30",children:[(0,a.jsx)("div",{className:"w-32 h-32 md:w-48 md:h-48 rounded-lg bg-linear-to-br from-purple-600 to-blue-400 flex items-center justify-center shadow-xl",children:(0,a.jsx)(x.A,{className:"w-16 h-16 md:w-20 md:h-20 text-foreground fill-current"})}),(0,a.jsxs)("div",{className:"flex-1",children:[(0,a.jsx)("p",{className:"text-xs font-medium text-foreground/80 uppercase tracking-wider",children:"Playlist"}),(0,a.jsx)("h2",{className:"text-3xl md:text-5xl font-bold text-foreground mt-1",children:"Liked Songs"}),(0,a.jsxs)("p",{className:"text-sm text-foreground/70 mt-2",children:[t.length," songs"]})]})]}),(0,a.jsxs)("div",{className:"flex items-center gap-4 px-2",children:[(0,a.jsx)(c.$,{size:"lg",className:"rounded-full w-14 h-14 bg-primary hover:bg-primary/90 hover:scale-105 transition-transform",onClick:()=>R(t),children:(0,a.jsx)(g.A,{className:"w-6 h-6 fill-current ml-1"})}),(0,a.jsx)(c.$,{variant:"ghost",size:"icon",className:"w-10 h-10",onClick:()=>U(t),children:(0,a.jsx)(f.A,{className:"w-6 h-6"})})]}),(0,a.jsx)("div",{className:"space-y-1",children:t.map((e,s)=>(0,a.jsx)(o.O,{track:e,index:s+1,onDownloadClick:()=>X(e),isDownloaded:$.has(e.id),isDownloading:C.has(e.id)},e.id))})]}):(0,a.jsx)(j,{icon:x.A,title:"Songs you like will appear here",description:"Save songs by tapping the heart icon"})}),(0,a.jsx)(u.av,{value:"recent",className:"mt-6",children:N.length>0?(0,a.jsxs)("div",{className:"space-y-4",children:[(0,a.jsxs)("div",{className:"flex items-end gap-6 p-6 rounded-lg bg-linear-to-br from-green-700/50 to-emerald-600/30",children:[(0,a.jsx)("div",{className:"w-32 h-32 md:w-48 md:h-48 rounded-lg bg-linear-to-br from-green-600 to-emerald-400 flex items-center justify-center shadow-xl",children:(0,a.jsx)(m.A,{className:"w-16 h-16 md:w-20 md:h-20 text-foreground"})}),(0,a.jsxs)("div",{className:"flex-1",children:[(0,a.jsx)("p",{className:"text-xs font-medium text-foreground/80 uppercase tracking-wider",children:"Playlist"}),(0,a.jsx)("h2",{className:"text-3xl md:text-5xl font-bold text-foreground mt-1",children:"Recently Played"}),(0,a.jsxs)("p",{className:"text-sm text-foreground/70 mt-2",children:[N.length," songs"]})]})]}),(0,a.jsxs)("div",{className:"flex items-center gap-4 px-2",children:[(0,a.jsx)(c.$,{size:"lg",className:"rounded-full w-14 h-14 bg-primary hover:bg-primary/90 hover:scale-105 transition-transform",onClick:()=>R(N),children:(0,a.jsx)(g.A,{className:"w-6 h-6 fill-current ml-1"})}),(0,a.jsx)(c.$,{variant:"ghost",size:"icon",className:"w-10 h-10",onClick:()=>U(N),children:(0,a.jsx)(f.A,{className:"w-6 h-6"})})]}),(0,a.jsx)("div",{className:"space-y-1",children:N.map((e,s)=>(0,a.jsx)(o.O,{track:e,index:s+1,onDownloadClick:()=>X(e),isDownloaded:$.has(e.id),isDownloading:C.has(e.id)},e.id))})]}):(0,a.jsx)(j,{icon:m.A,title:"Listen to music",description:"Your recently played tracks will show up here"})}),(0,a.jsx)(u.av,{value:"downloads",className:"mt-6",children:k.length>0?(0,a.jsxs)("div",{className:"space-y-4",children:[(0,a.jsxs)("div",{className:"flex items-end gap-6 p-6 rounded-lg bg-linear-to-br from-green-700/50 to-emerald-600/30",children:[(0,a.jsx)("div",{className:"w-32 h-32 md:w-48 md:h-48 rounded-lg bg-linear-to-br from-green-600 to-emerald-400 flex items-center justify-center shadow-xl",children:(0,a.jsx)(h.A,{className:"w-16 h-16 md:w-20 md:h-20 text-foreground fill-current"})}),(0,a.jsxs)("div",{className:"flex-1",children:[(0,a.jsx)("p",{className:"text-sm text-muted-foreground mb-2",children:"Offline Downloads"}),(0,a.jsx)("h2",{className:"text-4xl md:text-5xl font-bold text-foreground mb-4",children:"My Downloads"}),(0,a.jsxs)("p",{className:"text-sm text-muted-foreground",children:[k.length," songs downloaded"]})]})]}),(0,a.jsxs)("div",{className:"flex gap-2 md:gap-4",children:[(0,a.jsxs)(c.$,{className:"gap-2",size:"lg",onClick:()=>R(k),children:[(0,a.jsx)(g.A,{className:"w-5 h-5"}),"Play All"]}),(0,a.jsx)(c.$,{variant:"outline",className:"w-10 h-10",size:"icon",onClick:()=>U(k),children:(0,a.jsx)(f.A,{className:"w-6 h-6"})})]}),(0,a.jsx)("div",{className:"space-y-1",children:k.map((e,s)=>(0,a.jsx)(o.O,{track:e,index:s+1,isDownloaded:!0,onDownloadClick:()=>X(e)},e.id))})]}):(0,a.jsx)(j,{icon:h.A,title:"No downloads yet",description:"Download songs from search to listen offline"})})]})]})})}function j({icon:e,title:s,description:t}){return(0,a.jsxs)("div",{className:"flex flex-col items-center justify-center py-16 text-center",children:[(0,a.jsx)("div",{className:"w-20 h-20 rounded-full bg-secondary flex items-center justify-center mb-4",children:(0,a.jsx)(e,{className:"w-10 h-10 text-muted-foreground"})}),(0,a.jsx)("h3",{className:"text-xl font-semibold text-foreground mb-2",children:s}),(0,a.jsx)("p",{className:"text-muted-foreground max-w-sm",children:t})]})}},91337:(e,s,t)=>{t.d(s,{cn:()=>n});var a=t(29722),r=t(622);function n(...e){return(0,r.QP)((0,a.$)(e))}}}]);