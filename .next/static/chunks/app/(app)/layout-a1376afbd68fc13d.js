(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[4944],{977:(e,t,r)=>{"use strict";r.d(t,{F:()=>i});var a=r(95155);r(12115);var s=r(89349),n=r(91337);function i({className:e,children:t,...r}){return(0,a.jsxs)(s.bL,{"data-slot":"scroll-area",className:(0,n.cn)("relative",e),...r,children:[(0,a.jsx)(s.LM,{"data-slot":"scroll-area-viewport",className:"focus-visible:ring-ring/50 size-full rounded-[inherit] transition-[color,box-shadow] outline-none focus-visible:ring-[3px] focus-visible:outline-1",children:t}),(0,a.jsx)(o,{}),(0,a.jsx)(s.OK,{})]})}function o({className:e,orientation:t="vertical",...r}){return(0,a.jsx)(s.VM,{"data-slot":"scroll-area-scrollbar",orientation:t,className:(0,n.cn)("flex touch-none p-px transition-colors select-none","vertical"===t&&"h-full w-2.5 border-l border-l-transparent","horizontal"===t&&"h-2.5 flex-col border-t border-t-transparent",e),...r,children:(0,a.jsx)(s.lr,{"data-slot":"scroll-area-thumb",className:"bg-border relative flex-1 rounded-full"})})}},4474:(e,t,r)=>{"use strict";r.d(t,{$:()=>l});var a=r(95155);r(12115);var s=r(42442),n=r(18460),i=r(91337);let o=(0,n.F)("inline-flex items-center justify-center gap-2 whitespace-nowrap rounded-md text-sm font-medium transition-all disabled:pointer-events-none disabled:opacity-50 [&_svg]:pointer-events-none [&_svg:not([class*='size-'])]:size-4 shrink-0 [&_svg]:shrink-0 outline-none focus-visible:border-ring focus-visible:ring-ring/50 focus-visible:ring-[3px] aria-invalid:ring-destructive/20 dark:aria-invalid:ring-destructive/40 aria-invalid:border-destructive",{variants:{variant:{default:"bg-primary text-primary-foreground hover:bg-primary/90",destructive:"bg-destructive text-white hover:bg-destructive/90 focus-visible:ring-destructive/20 dark:focus-visible:ring-destructive/40 dark:bg-destructive/60",outline:"border bg-background shadow-xs hover:bg-accent hover:text-accent-foreground dark:bg-input/30 dark:border-input dark:hover:bg-input/50",secondary:"bg-secondary text-secondary-foreground hover:bg-secondary/80",ghost:"hover:bg-accent hover:text-accent-foreground dark:hover:bg-accent/50",link:"text-primary underline-offset-4 hover:underline"},size:{default:"h-9 px-4 py-2 has-[>svg]:px-3",sm:"h-8 rounded-md gap-1.5 px-3 has-[>svg]:px-2.5",lg:"h-10 rounded-md px-6 has-[>svg]:px-4",icon:"size-9","icon-sm":"size-8","icon-lg":"size-10"}},defaultVariants:{variant:"default",size:"default"}});function l({className:e,variant:t,size:r,asChild:n=!1,...l}){let d=n?s.DX:"button";return(0,a.jsx)(d,{"data-slot":"button",className:(0,i.cn)(o({variant:t,size:r,className:e})),...l})}},8894:(e,t,r)=>{"use strict";r.d(t,{NowPlayingBar:()=>o});var a=r(95155),s=r(37206),n=r(12115);let i=(0,s.default)(()=>Promise.all([r.e(9727),r.e(8799)]).then(r.bind(r,38799)).then(e=>e.NowPlayingBarClient),{loadableGenerated:{webpack:()=>[38799]},ssr:!1}),o=(0,n.memo)(function({className:e,mobile:t}){return(0,a.jsx)(i,{className:e,mobile:t})})},9891:(e,t,r)=>{"use strict";r.d(t,{default:()=>n});var a=r(95155),s=r(12115);let n=()=>{let[e,t]=(0,s.useState)(1);return(0,a.jsx)("div",{className:"fixed inset-0 bg-black bg-opacity-50 z-50 flex items-center justify-center",children:(0,a.jsxs)("div",{className:"bg-gray-800 p-8 rounded-lg shadow-lg w-full max-w-md",children:[1===e&&(0,a.jsxs)("div",{children:[(0,a.jsx)("h2",{className:"text-2xl font-bold mb-4",children:"Welcome to Sean Streams!"}),(0,a.jsx)("p",{children:"Let's get you set up."})]}),2===e&&(0,a.jsxs)("div",{children:[(0,a.jsx)("h2",{className:"text-2xl font-bold mb-4",children:"Personalize Your Experience"}),(0,a.jsx)("p",{children:"Tell us what you like."})]}),3===e&&(0,a.jsxs)("div",{children:[(0,a.jsx)("h2",{className:"text-2xl font-bold mb-4",children:"All Set!"}),(0,a.jsx)("p",{children:"Enjoy your personalized music experience."})]}),(0,a.jsxs)("div",{className:"mt-8 flex justify-between",children:[e>1&&(0,a.jsx)("button",{onClick:()=>t(e-1),className:"px-4 py-2 bg-gray-600 rounded-md",children:"Previous"}),e<3&&(0,a.jsx)("button",{onClick:()=>t(e+1),className:"px-4 py-2 bg-green-600 rounded-md",children:"Next"}),3===e&&(0,a.jsx)("button",{onClick:()=>localStorage.setItem("onboardingComplete","true"),className:"px-4 py-2 bg-green-600 rounded-md",children:"Finish"})]})]})})}},20809:(e,t,r)=>{"use strict";r.d(t,{ThemeToggle:()=>d});var a=r(95155);r(12115);var s=r(51900),n=r(36999),i=r(70460),o=r(4474),l=r(43447);function d(){let{setTheme:e}=(0,i.D)();return(0,a.jsxs)(l.rI,{children:[(0,a.jsx)(l.ty,{asChild:!0,children:(0,a.jsxs)(o.$,{variant:"ghost",size:"icon",children:[(0,a.jsx)(s.A,{className:"h-[1.2rem] w-[1.2rem] rotate-0 scale-100 transition-all dark:-rotate-90 dark:scale-0"}),(0,a.jsx)(n.A,{className:"absolute h-[1.2rem] w-[1.2rem] rotate-90 scale-0 transition-all dark:rotate-0 dark:scale-100"}),(0,a.jsx)("span",{className:"sr-only",children:"Toggle theme"})]})}),(0,a.jsxs)(l.SQ,{align:"end",children:[(0,a.jsx)(l._2,{onClick:()=>e("light"),children:"Light"}),(0,a.jsx)(l._2,{onClick:()=>e("dark"),children:"Dark"}),(0,a.jsx)(l._2,{onClick:()=>e("system"),children:"System"})]})]})}},23788:(e,t,r)=>{"use strict";r.d(t,{BottomNav:()=>n});var a=r(95155);let s=(0,r(37206).default)(()=>r.e(728).then(r.bind(r,80728)).then(e=>e.BottomNavClient),{loadableGenerated:{webpack:()=>[80728]},ssr:!1});function n(){return(0,a.jsx)(s,{})}},30783:(e,t,r)=>{"use strict";r.d(t,{$I:()=>l,Gp:()=>o,WD:()=>d,Yw:()=>i,Ze:()=>n});let a=null;async function s(){return a||new Promise((e,t)=>{let r=indexedDB.open("pulse-music-stats",1);r.onerror=()=>t(r.error),r.onsuccess=()=>{e(a=r.result)},r.onupgradeneeded=e=>{let t=e.target.result;if(!t.objectStoreNames.contains("trackStats")){let e=t.createObjectStore("trackStats",{keyPath:"trackId"});e.createIndex("playCount","playCount",{unique:!1}),e.createIndex("lastPlayed","lastPlayed",{unique:!1})}if(!t.objectStoreNames.contains("listeningHistory")){let e=t.createObjectStore("listeningHistory",{keyPath:"id",autoIncrement:!0});e.createIndex("timestamp","timestamp",{unique:!1}),e.createIndex("date","date",{unique:!1})}}})}async function n(e){try{let t=(await s()).transaction(["trackStats","listeningHistory"],"readwrite"),r=t.objectStore("trackStats"),a=await new Promise(t=>{let a=r.get(e.id);a.onsuccess=()=>t(a.result)}),n=Date.now(),i="string"==typeof e.duration?parseInt(e.duration,10)||0:e.duration||0,o={trackId:e.id,title:e.title,artist:e.channelTitle,playCount:(a?.playCount||0)+1,lastPlayed:n,totalListeningTime:(a?.totalListeningTime||0)+i,likedAt:a?.likedAt,addedToPlaylistCount:a?.addedToPlaylistCount||0};await new Promise((e,t)=>{let a=r.put(o);a.onsuccess=()=>e(),a.onerror=()=>t(a.error)});let l=t.objectStore("listeningHistory");await new Promise((t,r)=>{let a=l.add({trackId:e.id,title:e.title,artist:e.channelTitle,duration:e.duration,timestamp:n,date:new Date(n).toISOString().split("T")[0]});a.onsuccess=()=>t(),a.onerror=()=>r(a.error)})}catch(e){console.error("[Stats] Error recording play:",e)}}async function i(e=10){try{let t=(await s()).transaction("trackStats","readonly").objectStore("trackStats").index("playCount");return new Promise((r,a)=>{let s=t.openCursor(null,"prev"),n=[];s.onsuccess=t=>{let a=t.target.result;a&&n.length<e?(n.push(a.value),a.continue()):r(n)},s.onerror=()=>a(s.error)})}catch(e){return console.error("[Stats] Error getting top tracks:",e),[]}}async function o(e=10){try{let t=await i(100),r=new Map;return t.forEach(e=>{let t=r.get(e.artist)||{artist:e.artist,playCount:0,totalListeningTime:0,topTracks:[]};t.playCount+=e.playCount,t.totalListeningTime+=e.totalListeningTime,t.topTracks.push(e),r.set(e.artist,t)}),Array.from(r.values()).sort((e,t)=>t.playCount-e.playCount).slice(0,e).map(e=>({...e,topTracks:e.topTracks.slice(0,3)}))}catch(e){return console.error("[Stats] Error getting top artists:",e),[]}}async function l(){try{let e=(await s()).transaction(["trackStats","listeningHistory"],"readonly"),t=await new Promise((t,r)=>{let a=e.objectStore("trackStats"),s=[],n=a.openCursor();n.onsuccess=e=>{let r=e.target.result;r?(s.push(r.value),r.continue()):t(s)},n.onerror=()=>r(n.error)}),r=Date.now(),a=r-6048e5,n=r-2592e6,i=t.filter(e=>e.lastPlayed>=a),l=t.filter(e=>e.lastPlayed>=n),d=t.sort((e,t)=>t.playCount-e.playCount).slice(0,10),c=await o(5);return{totalTracks:t.length,totalArtists:new Set(t.map(e=>e.artist)).size,totalListeningTime:t.reduce((e,t)=>e+t.totalListeningTime,0),averageTrackLength:t.length>0?t.reduce((e,t)=>e+t.totalListeningTime,0)/t.length:0,topTracks:d,topArtists:c,likedTracksCount:t.filter(e=>e.likedAt).length,playlistsCount:0,lastListenedAt:Math.max(...t.map(e=>e.lastPlayed)),thisWeekListeningTime:i.reduce((e,t)=>e+t.totalListeningTime,0),thisMonthListeningTime:l.reduce((e,t)=>e+t.totalListeningTime,0)}}catch(e){return console.error("[Stats] Error getting listening stats:",e),{totalTracks:0,totalArtists:0,totalListeningTime:0,averageTrackLength:0,topTracks:[],topArtists:[],likedTracksCount:0,playlistsCount:0,lastListenedAt:0,thisWeekListeningTime:0,thisMonthListeningTime:0}}}function d(e){let t=Math.floor(e/3600),r=Math.floor(e%3600/60);return 0===t?`${r}m`:`${t}h ${r}m`}},43447:(e,t,r)=>{"use strict";r.d(t,{M5:()=>h,SQ:()=>d,_2:()=>c,lv:()=>u,nV:()=>m,rI:()=>o,ty:()=>l});var a=r(95155);r(12115);var s=r(57463),n=r(21362),i=r(91337);function o({...e}){return(0,a.jsx)(s.bL,{"data-slot":"dropdown-menu",...e})}function l({...e}){return(0,a.jsx)(s.l9,{"data-slot":"dropdown-menu-trigger",...e})}function d({className:e,sideOffset:t=4,...r}){return(0,a.jsx)(s.ZL,{children:(0,a.jsx)(s.UC,{"data-slot":"dropdown-menu-content",sideOffset:t,className:(0,i.cn)("bg-popover text-popover-foreground data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[side=bottom]:slide-in-from-top-2 data-[side=left]:slide-in-from-right-2 data-[side=right]:slide-in-from-left-2 data-[side=top]:slide-in-from-bottom-2 z-50 max-h-(--radix-dropdown-menu-content-available-height) min-w-[8rem] origin-(--radix-dropdown-menu-content-transform-origin) overflow-x-hidden overflow-y-auto rounded-md border p-1 shadow-md",e),...r})})}function c({className:e,inset:t,variant:r="default",...n}){return(0,a.jsx)(s.q7,{"data-slot":"dropdown-menu-item","data-inset":t,"data-variant":r,className:(0,i.cn)("focus:bg-accent focus:text-accent-foreground data-[variant=destructive]:text-destructive data-[variant=destructive]:focus:bg-destructive/10 dark:data-[variant=destructive]:focus:bg-destructive/20 data-[variant=destructive]:focus:text-destructive data-[variant=destructive]:*:[svg]:!text-destructive [&_svg:not([class*='text-'])]:text-muted-foreground relative flex cursor-default items-center gap-2 rounded-sm px-2 py-1.5 text-sm outline-hidden select-none data-[disabled]:pointer-events-none data-[disabled]:opacity-50 data-[inset]:pl-8 [&_svg]:pointer-events-none [&_svg]:shrink-0 [&_svg:not([class*='size-'])]:size-4",e),...n})}function u({...e}){return(0,a.jsx)(s.Pb,{"data-slot":"dropdown-menu-sub",...e})}function m({className:e,inset:t,children:r,...o}){return(0,a.jsxs)(s.ZP,{"data-slot":"dropdown-menu-sub-trigger","data-inset":t,className:(0,i.cn)("focus:bg-accent focus:text-accent-foreground data-[state=open]:bg-accent data-[state=open]:text-accent-foreground [&_svg:not([class*='text-'])]:text-muted-foreground flex cursor-default items-center gap-2 rounded-sm px-2 py-1.5 text-sm outline-hidden select-none data-[inset]:pl-8 [&_svg]:pointer-events-none [&_svg]:shrink-0 [&_svg:not([class*='size-'])]:size-4",e),...o,children:[r,(0,a.jsx)(n.A,{className:"ml-auto size-4"})]})}function h({className:e,...t}){return(0,a.jsx)(s.G5,{"data-slot":"dropdown-menu-sub-content",className:(0,i.cn)("bg-popover text-popover-foreground data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[side=bottom]:slide-in-from-top-2 data-[side=left]:slide-in-from-right-2 data-[side=right]:slide-in-from-left-2 data-[side=top]:slide-in-from-bottom-2 z-50 min-w-[8rem] origin-(--radix-dropdown-menu-content-transform-origin) overflow-hidden rounded-md border p-1 shadow-lg",e),...t})}},46400:(e,t,r)=>{"use strict";r.d(t,{F:()=>n,T:()=>s});var a=r(12115);let s=(0,a.createContext)(void 0);function n(){let e=(0,a.useContext)(s);if(void 0===e)throw Error("usePlayer must be used within a PlayerProvider");return e}},48023:(e,t,r)=>{"use strict";r.d(t,{Sidebar:()=>S});var a=r(95155),s=r(98500),n=r.n(s),i=r(73321),o=r(66614),l=r(61878),d=r(7810),c=r(89123),u=r(87389),m=r(51914),h=r(37416),p=r(7686),f=r(10029),g=r(42869),x=r(91337),v=r(4474),b=r(977);let y=(0,r(37206).default)(()=>Promise.all([r.e(9338),r.e(8349),r.e(5)]).then(r.bind(r,80005)).then(e=>e.GamificationWidgetClient),{loadableGenerated:{webpack:()=>[80005]},ssr:!1});function w(){return(0,a.jsx)(y,{})}var j=r(12115);let k=[{href:"/",icon:o.A,label:"Home"},{href:"/search",icon:l.A,label:"Search"},{href:"/artists",icon:d.A,label:"Artists"},{href:"/stats",icon:c.A,label:"Stats"}],S=(0,j.memo)(function({className:e}){let t=(0,i.usePathname)();return(0,a.jsxs)("div",{className:(0,x.cn)("w-64 flex flex-col gap-2 p-2 bg-background",e),children:[(0,a.jsx)("div",{className:"bg-card rounded-lg p-3",children:(0,a.jsx)("nav",{className:"space-y-1",children:k.map(e=>{let r=t===e.href||"/"!==e.href&&t.startsWith(e.href),s=e.icon;return(0,a.jsxs)(n(),{href:e.href,className:(0,x.cn)("flex items-center gap-4 px-3 py-3 rounded-md font-semibold transition-colors",r?"text-foreground":"text-muted-foreground hover:text-foreground"),children:[(0,a.jsx)(s,{className:"w-6 h-6"}),(0,a.jsx)("span",{children:e.label})]},e.href)})})}),(0,a.jsx)(w,{}),(0,a.jsxs)("div",{className:"flex-1 bg-card rounded-lg flex flex-col min-h-0",children:[(0,a.jsxs)("div",{className:"flex items-center justify-between px-4 py-3",children:[(0,a.jsxs)(n(),{href:"/library",className:(0,x.cn)("flex items-center gap-3 font-semibold transition-colors",t.startsWith("/library")?"text-foreground":"text-muted-foreground hover:text-foreground"),children:[(0,a.jsx)(u.A,{className:"w-6 h-6"}),(0,a.jsx)("span",{children:"Your Library"})]}),(0,a.jsx)(v.$,{variant:"ghost",size:"icon",className:"w-8 h-8",children:(0,a.jsx)(m.A,{className:"w-4 h-4"})})]}),(0,a.jsx)(b.F,{className:"flex-1 px-2",children:(0,a.jsxs)("div",{className:"space-y-1 pb-4",children:[(0,a.jsxs)(n(),{href:"/playlists",className:(0,x.cn)("flex items-center gap-3 p-2 rounded-md hover:bg-secondary/50 transition-colors","/playlists"===t?"bg-secondary/50":""),children:[(0,a.jsx)("div",{className:"w-12 h-12 rounded-md bg-linear-to-br from-orange-600 to-red-500 flex items-center justify-center shrink-0",children:(0,a.jsx)(h.A,{className:"w-5 h-5 text-foreground"})}),(0,a.jsxs)("div",{className:"flex-1 min-w-0",children:[(0,a.jsx)("p",{className:"font-medium text-foreground truncate",children:"Playlists"}),(0,a.jsx)("p",{className:"text-sm text-muted-foreground",children:"Your playlists"})]})]}),(0,a.jsxs)(n(),{href:"/library?tab=liked",className:"flex items-center gap-3 p-2 rounded-md hover:bg-secondary/50 transition-colors group",children:[(0,a.jsx)("div",{className:"w-12 h-12 rounded-md bg-linear-to-br from-purple-700 to-blue-300 flex items-center justify-center shrink-0",children:(0,a.jsx)(p.A,{className:"w-5 h-5 text-foreground fill-current"})}),(0,a.jsxs)("div",{className:"flex-1 min-w-0",children:[(0,a.jsx)("p",{className:"font-medium text-foreground truncate",children:"Liked Songs"}),(0,a.jsx)("p",{className:"text-sm text-muted-foreground",children:"Playlist"})]})]}),(0,a.jsxs)(n(),{href:"/library?tab=recent",className:"flex items-center gap-3 p-2 rounded-md hover:bg-secondary/50 transition-colors group",children:[(0,a.jsx)("div",{className:"w-12 h-12 rounded-md bg-linear-to-br from-green-700 to-green-400 flex items-center justify-center shrink-0",children:(0,a.jsx)(f.A,{className:"w-5 h-5 text-foreground"})}),(0,a.jsxs)("div",{className:"flex-1 min-w-0",children:[(0,a.jsx)("p",{className:"font-medium text-foreground truncate",children:"Recently Played"}),(0,a.jsx)("p",{className:"text-sm text-muted-foreground",children:"Playlist"})]})]})]})})]}),(0,a.jsxs)(n(),{href:"/profile",className:(0,x.cn)("flex items-center gap-3 p-3 rounded-lg bg-card hover:bg-card/80 transition-colors","/profile"===t?"ring-2 ring-primary":""),children:[(0,a.jsx)("div",{className:"w-10 h-10 rounded-full bg-linear-to-br from-blue-500 to-purple-500 flex items-center justify-center shrink-0",children:(0,a.jsx)(g.A,{className:"w-5 h-5 text-white"})}),(0,a.jsx)("span",{className:"text-sm font-medium truncate",children:"Profile"})]})]})})},54614:(e,t,r)=>{"use strict";r.d(t,{$o:()=>o,ToastProvider:()=>l});var a=r(95155),s=r(12115);let n=new Map,i=(e,t)=>{switch(t.type){case"ADD_TOAST":return{...e,toasts:[t.toast,...e.toasts].slice(0,1)};case"UPDATE_TOAST":return{...e,toasts:e.toasts.map(e=>e.id===t.toast.id?{...e,...t.toast}:e)};case"DISMISS_TOAST":{let{toastId:r}=t;return{...e,toasts:e.toasts.map(e=>e.id===r||void 0===r?{...e,open:!1}:e)}}case"REMOVE_TOAST":if(void 0===t.toastId)return{...e,toasts:[]};return{...e,toasts:e.toasts.filter(e=>e.id!==t.toastId)};default:return e}},o=s.createContext(void 0),l=({children:e})=>{let[t,r]=s.useReducer(i,{toasts:[]});return s.useEffect(()=>{t.toasts.forEach(e=>{!1===e.open&&((e,t)=>{if(n.has(e))return;let r=setTimeout(()=>{n.delete(e),t({type:"REMOVE_TOAST",toastId:e})},1e6);n.set(e,r)})(e.id,r)})},[t.toasts]),(0,a.jsx)(o.Provider,{value:{state:t,dispatch:r},children:e})}},79070:(e,t,r)=>{"use strict";r.d(t,{Providers:()=>h});var a=r(95155),s=r(12115),n=r(43928),i=r(23623),o=r(30783),l=r(46400),d=r(81890),c=r(81400);function u({children:e}){let[t,r]=(0,s.useState)(null),[u,m]=(0,s.useState)(!1),[h,p]=(0,s.useState)(0),[f,g]=(0,s.useState)(0),[x,v]=(0,s.useState)(80),[b,y]=(0,s.useState)([]),[w,j]=(0,s.useState)(-1),[k,S]=(0,s.useState)(!1),[N,T]=(0,s.useState)(!1),[A,P]=(0,s.useState)([]),C=(0,s.useRef)(null),I=(0,s.useRef)(null),E=(0,s.useRef)(null),L=(0,s.useRef)(null),_=(0,s.useRef)(!1),{toast:z}=(0,d.d)();(0,s.useEffect)(()=>{if(window.YT)T(!0);else{let e=document.createElement("script");e.src="https://www.youtube.com/iframe_api",document.head.appendChild(e),window.onYouTubeIframeAPIReady=()=>T(!0)}let e=new Audio("data:audio/wav;base64,UklGRjIAAABXQVZFZm10IBIAAAABAAEARKwAAIhYAQACABAAZGF0YQAAAAA=");e.loop=!0,L.current=e;let t=document.createElement("div");t.id="youtube-player-container",t.style.cssText="position:fixed;top:-999px;left:-999px;width:1px;height:1px;";let r=document.createElement("div");return r.id="youtube-player",t.appendChild(r),document.body.appendChild(t),()=>{C.current?.destroy(),t.remove(),L.current?.pause()}},[]);let D=(0,s.useCallback)(e=>{let t=e.data;t===window.YT.PlayerState.PLAYING?(m(!0),S(!1),G(),navigator.mediaSession&&(navigator.mediaSession.playbackState="playing")):t===window.YT.PlayerState.PAUSED?(m(!1),H(),navigator.mediaSession&&(navigator.mediaSession.playbackState="paused")):t===window.YT.PlayerState.ENDED?V():t===window.YT.PlayerState.BUFFERING&&S(!0)},[G,H,V]);(0,s.useEffect)(()=>{N&&!C.current&&(C.current=new window.YT.Player("youtube-player",{height:"1",width:"1",playerVars:{autoplay:0,controls:0,enablejsapi:1,origin:window.location.origin},events:{onReady:e=>e.target.setVolume(x),onStateChange:D,onError:e=>{console.warn(`[Player] YouTube Error: ${e.data}`),V()}}}))},[N,x,D,V]);let O=(0,s.useCallback)(()=>{E.current&&(clearInterval(E.current),E.current=null)},[]),M=(0,s.useCallback)(()=>{O(),E.current=setInterval(()=>{document.hidden&&_.current&&C.current&&C.current.getPlayerState()!==window.YT.PlayerState.PLAYING&&C.current.playVideo()},1e3)},[O]);(0,s.useEffect)(()=>{let e=()=>{document.hidden?u&&(_.current=!0,M()):(_.current=!1,O())};return document.addEventListener("visibilitychange",e),()=>document.removeEventListener("visibilitychange",e)},[u,M,O]);let Y=(0,s.useCallback)(async(e,t)=>{if(!e||!e.id)return;r(e);let a=t&&t.length>0?t:[e];y(a),j(a.findIndex(t=>t.id===e.id)),S(!0);let s=async()=>{if(C.current&&"function"==typeof C.current.loadVideoById){C.current.loadVideoById(e.id),C.current.playVideo(),L.current?.play().catch(e=>console.warn("[Player] Silent audio failed to play:",e)),(0,i.W5)(e),(0,o.Ze)(e);let t=await fetch("/api/gamification/play",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({userId:"user-id",duration:(0,n.XB)(e.duration)})}),{newAchievements:r,leveledUp:a}=await t.json();r.length>0&&P(e=>[...e,...r]),a&&z({title:"Level Up!",description:"You've reached a new level!"})}else setTimeout(s,100)};s()},[z]),R=(0,s.useCallback)(()=>{C.current&&t&&(u?(C.current.pauseVideo(),L.current?.pause()):(C.current.playVideo(),L.current?.play().catch(e=>console.warn("[Player] Silent audio failed to play:",e))))},[t,u]),V=(0,s.useCallback)(()=>{if(0===b.length)return;let e=(w+1)%b.length;Y(b[e],b)},[b,w,Y]),B=(0,s.useCallback)(()=>{if(0!==b.length)if(h>3)F(0);else{let e=(w-1+b.length)%b.length;Y(b[e],b)}},[b,w,h,Y,F]),F=(0,s.useCallback)(e=>{C.current&&(C.current.seekTo(e,!0),p(e))},[]),G=(0,s.useCallback)(()=>{H(),I.current=setInterval(()=>{let e=C.current?.getCurrentTime()||0,t=C.current?.getDuration()||0;p(e),g(t),navigator.mediaSession?.setPositionState&&navigator.mediaSession.setPositionState({duration:t,playbackRate:1,position:e})},250)},[H]),H=(0,s.useCallback)(()=>{I.current&&(clearInterval(I.current),I.current=null)},[]);(0,s.useEffect)(()=>{t&&navigator.mediaSession&&(navigator.mediaSession.metadata=new MediaMetadata({title:t.title,artist:t.channelTitle,album:"Sean-Streams",artwork:[{src:t.thumbnail||""}]}),navigator.mediaSession.setActionHandler("play",R),navigator.mediaSession.setActionHandler("pause",R),navigator.mediaSession.setActionHandler("nexttrack",V),navigator.mediaSession.setActionHandler("previoustrack",B),navigator.mediaSession.setActionHandler("seekto",e=>e.seekTime&&F(e.seekTime)))},[t,V,B,F,R]);let $=(0,s.useCallback)(e=>{v(e),C.current?.setVolume(e)},[]);return(0,a.jsxs)(l.T.Provider,{value:{currentSong:t,isPlaying:u,currentTime:h,duration:f,volume:x,queue:b,queueIndex:w,isLoading:k,playSong:Y,togglePlayPause:R,nextTrack:V,previousTrack:B,seek:F,setVolume:$},children:[e,A.map(e=>(0,a.jsx)(c.F,{title:e.title,description:e.description,onClose:()=>P(t=>t.filter(t=>t.id!==e.id))},e.id))]})}var m=r(54614);function h({children:e}){return(0,a.jsx)(u,{children:(0,a.jsx)(m.ToastProvider,{children:e})})}},81400:(e,t,r)=>{"use strict";r.d(t,{F:()=>l});var a=r(95155),s=r(12115),n=r(94928),i=r(33210),o=r(91337);function l({title:e,description:t,onClose:r}){let[l,d]=(0,s.useState)(!1);return(0,s.useEffect)(()=>{let e=setTimeout(()=>d(!0),100),t=setTimeout(()=>{d(!1),setTimeout(r,300)},5e3);return()=>{clearTimeout(e),clearTimeout(t)}},[r]),(0,a.jsx)("div",{className:(0,o.cn)("fixed top-4 left-1/2 -translate-x-1/2 z-[200] transition-all duration-300",l?"opacity-100 translate-y-0":"opacity-0 -translate-y-4"),children:(0,a.jsxs)("div",{className:"flex items-center gap-3 px-5 py-3 rounded-xl bg-card border border-primary/30 shadow-2xl shadow-primary/10 backdrop-blur-xl max-w-sm",children:[(0,a.jsx)("div",{className:"w-10 h-10 rounded-lg bg-primary/20 flex items-center justify-center shrink-0 animate-achievement",children:(0,a.jsx)(n.A,{className:"w-5 h-5 text-primary"})}),(0,a.jsxs)("div",{className:"flex-1 min-w-0",children:[(0,a.jsx)("p",{className:"text-sm font-bold text-foreground",children:"Achievement Unlocked!"}),(0,a.jsx)("p",{className:"text-xs text-primary font-medium",children:e}),(0,a.jsx)("p",{className:"text-xs text-muted-foreground truncate",children:t})]}),(0,a.jsx)("button",{onClick:r,className:"shrink-0 text-muted-foreground hover:text-foreground",children:(0,a.jsx)(i.A,{className:"w-4 h-4"})})]})})}},81890:(e,t,r)=>{"use strict";r.d(t,{d:()=>i});var a=r(12115),s=r(54614);let n=0;function i(){let e=a.useContext(s.$o);if(!e)throw Error("useToast must be used within a ToastProvider");let{state:t,dispatch:r}=e,i=a.useCallback(({...e})=>{let t=(n=(n+1)%Number.MAX_SAFE_INTEGER).toString(),a=()=>r({type:"DISMISS_TOAST",toastId:t});return r({type:"ADD_TOAST",toast:{...e,id:t,open:!0,onOpenChange:e=>{e||a()}}}),{id:t,dismiss:a}},[r]);return{...t,toast:i,dismiss:e=>r({type:"DISMISS_TOAST",toastId:e})}}},91337:(e,t,r)=>{"use strict";r.d(t,{cn:()=>n});var a=r(29722),s=r(622);function n(...e){return(0,s.QP)((0,a.$)(e))}},97263:(e,t,r)=>{Promise.resolve().then(r.bind(r,79070)),Promise.resolve().then(r.bind(r,23788)),Promise.resolve().then(r.bind(r,8894)),Promise.resolve().then(r.bind(r,9891)),Promise.resolve().then(r.bind(r,48023)),Promise.resolve().then(r.bind(r,20809)),Promise.resolve().then(r.t.bind(r,98500,23))}},e=>{e.O(0,[6679,1300,8500,1018,1886,5662,5943,3623,8441,3794,7358],()=>e(e.s=97263)),_N_E=e.O()}]);