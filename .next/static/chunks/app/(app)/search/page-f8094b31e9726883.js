(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[7712],{4474:(e,t,r)=>{"use strict";r.d(t,{$:()=>n});var s=r(95155);r(12115);var a=r(42442),i=r(18460),o=r(91337);let l=(0,i.F)("inline-flex items-center justify-center gap-2 whitespace-nowrap rounded-md text-sm font-medium transition-all disabled:pointer-events-none disabled:opacity-50 [&_svg]:pointer-events-none [&_svg:not([class*='size-'])]:size-4 shrink-0 [&_svg]:shrink-0 outline-none focus-visible:border-ring focus-visible:ring-ring/50 focus-visible:ring-[3px] aria-invalid:ring-destructive/20 dark:aria-invalid:ring-destructive/40 aria-invalid:border-destructive",{variants:{variant:{default:"bg-primary text-primary-foreground hover:bg-primary/90",destructive:"bg-destructive text-white hover:bg-destructive/90 focus-visible:ring-destructive/20 dark:focus-visible:ring-destructive/40 dark:bg-destructive/60",outline:"border bg-background shadow-xs hover:bg-accent hover:text-accent-foreground dark:bg-input/30 dark:border-input dark:hover:bg-input/50",secondary:"bg-secondary text-secondary-foreground hover:bg-secondary/80",ghost:"hover:bg-accent hover:text-accent-foreground dark:hover:bg-accent/50",link:"text-primary underline-offset-4 hover:underline"},size:{default:"h-9 px-4 py-2 has-[>svg]:px-3",sm:"h-8 rounded-md gap-1.5 px-3 has-[>svg]:px-2.5",lg:"h-10 rounded-md px-6 has-[>svg]:px-4",icon:"size-9","icon-sm":"size-8","icon-lg":"size-10"}},defaultVariants:{variant:"default",size:"default"}});function n({className:e,variant:t,size:r,asChild:i=!1,...n}){let c=i?a.DX:"button";return(0,s.jsx)(c,{"data-slot":"button",className:(0,o.cn)(l({variant:t,size:r,className:e})),...n})}},19171:(e,t,r)=>{"use strict";r.r(t),r.d(t,{default:()=>$});var s=r(95155),a=r(12115),i=r(73321),o=r(61878),l=r(33210),n=r(6296),c=r(84980),d=r(68459),u=r(39658),m=r(4474),h=r(43928),p=r(70529),g=r(41693),f=r(46400),x=r(81890),v=r(94674),y=r(23511);let b="pulse-search-history";function w(){try{let e=localStorage.getItem(b);return e?JSON.parse(e):[]}catch{return[]}}var j=r(9339);let N=(0,j.createServerReference)("40b2e24b9892b3f477a105d5a50b76eb6e8c5e4570",j.callServer,void 0,j.findSourceMapURL,"searchArtists"),S=(0,j.createServerReference)("400f5b7375875281b3c92d0c47548eabe1231b6dd8",j.callServer,void 0,j.findSourceMapURL,"searchAlbums");var k=r(95885);let T=[{name:"Pop",color:"from-pink-500 to-rose-500",query:"pop hits 2024"},{name:"Hip-Hop",color:"from-orange-500 to-amber-500",query:"hip hop hits"},{name:"Rock",color:"from-red-600 to-red-400",query:"rock music"},{name:"Electronic",color:"from-cyan-500 to-blue-500",query:"electronic dance music"},{name:"R&B",color:"from-purple-600 to-violet-400",query:"r&b soul music"},{name:"Latin",color:"from-green-500 to-emerald-400",query:"latin music reggaeton"},{name:"Jazz",color:"from-amber-600 to-yellow-400",query:"jazz music"},{name:"Classical",color:"from-slate-500 to-gray-400",query:"classical music"}];function $(){let[e,t]=(0,a.useState)(""),[r,j]=(0,a.useState)([]),[k,$]=(0,a.useState)([]),[P,I]=(0,a.useState)([]),[C,_]=(0,a.useState)([]),[O,R]=(0,a.useState)([]),[q,z]=(0,a.useState)([]),[F,L]=(0,a.useState)(!1),[U,M]=(0,a.useState)(!0),[B,Y]=(0,a.useState)(null),[V,J]=(0,a.useState)(new Set),[K,Z]=(0,a.useState)(new Set),H=function(e,t){let[r,s]=(0,a.useState)(e);return(0,a.useEffect)(()=>{let t=setTimeout(()=>{s(e)},500);return()=>{clearTimeout(t)}},[e,500]),r}(e,0),{playQueue:W}=(0,f.F)(),{toast:X}=(0,x.d)();(0,i.useRouter)(),(0,a.useEffect)(()=>{!async function(){M(!0);try{let e=await (0,h.Pd)();R(e)}catch(e){console.error("[v0] Error loading trending:",e)}finally{M(!1)}z(w().map(e=>e.query));try{let e=await (0,v.WR)(),t=new Set(e.map(e=>e.id));Z(t)}catch(e){console.error("[v0] Error loading downloaded tracks:",e)}}()},[]),(0,a.useEffect)(()=>{!async function(){if(!H.trim()){j([]),$([]),I([]),_([]);return}L(!0);try{let[e,t,r]=await Promise.all([(0,h.eZ)(H),N(H),S(H)]);j(e.videos),$(e.playlists||[]),I(t),_(r);try{let e=w().filter(e=>e.query!==H),t=[{query:H,timestamp:Date.now()},...e].slice(0,50);localStorage.setItem(b,JSON.stringify(t))}catch(e){console.error("Failed to save search history:",e)}z(w().map(e=>e.query))}catch(e){console.error("[v0] Search error:",e)}finally{L(!1)}}()},[H]);let G=async e=>{Y(e.name),t(e.name)},Q=async e=>{if(K.has(e.id))return void X({title:"Already Downloaded",description:"This track is already in your library."});J(t=>new Set(t).add(e.id));try{await (0,v.UB)(e,t=>{console.log(`[v0] Download progress for ${e.id}: ${t}%`)}),Z(t=>new Set(t).add(e.id)),X({title:"Success",description:`"${e.title}" downloaded successfully!`})}catch(t){console.error("[v0] Download error:",t),X({title:"Download Failed",description:`Failed to download "${e.title}". Try again later.`,variant:"destructive"})}finally{J(t=>{let r=new Set(t);return r.delete(e.id),r})}},ee=()=>{let e=r.length>0?r:O;e.length>0&&W(e)},et=e.trim()||B,er=r.length>0||k.length>0||P.length>0||C.length>0;return(0,s.jsxs)("div",{className:"space-y-8",children:[(0,s.jsxs)("div",{className:"space-y-4",children:[(0,s.jsx)("h1",{className:"text-3xl font-bold text-foreground",children:"Search"}),(0,s.jsxs)("div",{className:"relative max-w-xl",children:[(0,s.jsx)(o.A,{className:"absolute left-4 top-1/2 -translate-y-1/2 w-5 h-5 text-muted-foreground"}),(0,s.jsx)(u.p,{type:"text",placeholder:"What do you want to play?",value:e,onChange:e=>{t(e.target.value),Y(null)},className:"pl-12 pr-12 h-12 bg-card border-0 rounded-full text-base"}),e&&(0,s.jsx)(m.$,{variant:"ghost",size:"icon",className:"absolute right-2 top-1/2 -translate-y-1/2 w-8 h-8",onClick:()=>{t(""),j([]),$([]),I([]),_([]),Y(null)},children:(0,s.jsx)(l.A,{className:"w-4 h-4"})})]})]}),F&&(0,s.jsx)("div",{className:"flex items-center justify-center py-12",children:(0,s.jsx)(n.A,{className:"w-8 h-8 animate-spin text-primary"})}),!F&&et&&er&&(0,s.jsxs)("section",{className:"space-y-8",children:[P.length>0&&(0,s.jsxs)("div",{className:"space-y-4",children:[(0,s.jsx)("h2",{className:"text-xl font-bold text-foreground",children:"Artists"}),(0,s.jsx)("div",{className:"grid grid-cols-2 sm:grid-cols-3 md:grid-cols-4 lg:grid-cols-5 xl:grid-cols-6 gap-4",children:P.map(e=>(0,s.jsx)(A,{artist:e},e.id))})]}),C.length>0&&(0,s.jsxs)("div",{className:"space-y-4",children:[(0,s.jsx)("h2",{className:"text-xl font-bold text-foreground",children:"Albums"}),(0,s.jsx)("div",{className:"grid grid-cols-2 sm:grid-cols-3 md:grid-cols-4 lg:grid-cols-5 xl:grid-cols-6 gap-4",children:C.map(e=>(0,s.jsx)(D,{album:e},e.id))})]}),k.length>0&&(0,s.jsxs)("div",{className:"space-y-4",children:[(0,s.jsx)("h2",{className:"text-xl font-bold text-foreground",children:"Playlists"}),(0,s.jsx)("div",{className:"grid grid-cols-2 sm:grid-cols-3 md:grid-cols-4 lg:grid-cols-5 xl:grid-cols-6 gap-4",children:k.map(e=>(0,s.jsx)(E,{playlist:e},e.id))})]}),r.length>0&&(0,s.jsxs)("div",{className:"space-y-4",children:[(0,s.jsxs)("div",{className:"flex items-center justify-between",children:[(0,s.jsx)("h2",{className:"text-xl font-bold text-foreground",children:"Songs"}),(0,s.jsx)(m.$,{variant:"ghost",size:"sm",className:"text-muted-foreground hover:text-foreground",onClick:ee,children:"Play all"})]}),(0,s.jsx)("div",{className:"space-y-1",children:r.map((e,t)=>(0,s.jsx)(g.O,{track:e,index:t+1,onDownloadClick:()=>Q(e),isDownloaded:K.has(e.id),isDownloading:V.has(e.id)},e.id))})]})]}),!F&&et&&!er&&(0,s.jsxs)("div",{className:"text-center py-12",children:[(0,s.jsxs)("p",{className:"text-muted-foreground",children:['No results found for "',e,'"']}),(0,s.jsx)("p",{className:"text-sm text-muted-foreground mt-1",children:"Try searching for something else"})]}),!et&&!F&&(0,s.jsxs)(s.Fragment,{children:[q.length>0&&(0,s.jsxs)("section",{className:"space-y-4",children:[(0,s.jsxs)("div",{className:"flex items-center justify-between",children:[(0,s.jsxs)("h2",{className:"text-xl font-bold text-foreground flex items-center gap-2",children:[(0,s.jsx)(c.A,{className:"w-5 h-5"}),"Recent Searches"]}),q.length>0&&(0,s.jsxs)(m.$,{variant:"ghost",size:"sm",className:"text-muted-foreground hover:text-foreground",onClick:()=>{try{localStorage.removeItem(b)}catch(e){console.error("Failed to clear search history:",e)}z([])},children:[(0,s.jsx)(d.A,{className:"w-4 h-4 mr-1"}),"Clear All"]})]}),(0,s.jsx)("div",{className:"grid grid-cols-2 sm:grid-cols-3 md:grid-cols-4 gap-3",children:q.slice(0,8).map(e=>(0,s.jsxs)("div",{className:"group flex items-center gap-2 p-3 rounded-lg bg-card hover:bg-card/80 transition-colors cursor-pointer",onClick:()=>{t(e)},children:[(0,s.jsx)(c.A,{className:"w-4 h-4 text-muted-foreground shrink-0"}),(0,s.jsx)("span",{className:"text-sm font-medium truncate text-foreground",children:e}),(0,s.jsx)(m.$,{variant:"ghost",size:"icon",className:"w-6 h-6 ml-auto opacity-0 group-hover:opacity-100 transition-opacity",onClick:t=>{t.stopPropagation();try{let t=w().filter(t=>t.query!==e);localStorage.setItem(b,JSON.stringify(t))}catch(e){console.error("Failed to remove search history item:",e)}z(w().map(e=>e.query))},children:(0,s.jsx)(l.A,{className:"w-3 h-3"})})]},e))})]}),(0,s.jsxs)("section",{className:"space-y-4",children:[(0,s.jsx)("h2",{className:"text-xl font-bold text-foreground",children:"Browse all"}),(0,s.jsx)("div",{className:"grid grid-cols-2 md:grid-cols-3 lg:grid-cols-4 gap-4",children:T.map(e=>(0,s.jsx)("button",{onClick:()=>G(e),className:`relative h-24 md:h-28 rounded-lg bg-gradient-to-br ${e.color} p-4 text-left overflow-hidden hover:scale-[1.02] transition-transform`,children:(0,s.jsx)("h3",{className:"text-lg md:text-xl font-bold text-foreground",children:e.name})},e.name))})]}),(0,s.jsxs)("section",{className:"space-y-4",children:[(0,s.jsxs)("div",{className:"flex items-center justify-between",children:[(0,s.jsx)("h2",{className:"text-xl font-bold text-foreground",children:"Trending Searches"}),(0,s.jsx)(m.$,{variant:"ghost",size:"sm",className:"text-muted-foreground hover:text-foreground",onClick:ee,children:"Play all"})]}),U?(0,s.jsx)("div",{className:"grid grid-cols-2 sm:grid-cols-3 md:grid-cols-4 lg:grid-cols-5 xl:grid-cols-6 gap-4",children:[...Array(6)].map((e,t)=>(0,s.jsxs)("div",{className:"space-y-3",children:[(0,s.jsx)(y.E,{className:"aspect-square rounded-lg"}),(0,s.jsx)(y.E,{className:"h-4 w-3/4"}),(0,s.jsx)(y.E,{className:"h-3 w-1/2"})]},t))}):(0,s.jsx)("div",{className:"grid grid-cols-2 sm:grid-cols-3 md:grid-cols-4 lg:grid-cols-5 xl:grid-cols-6 gap-4",children:O.slice(0,12).map(e=>(0,s.jsx)(p.w,{track:e},e.id))})]})]})]})}function A({artist:e}){return(0,i.useRouter)(),(0,s.jsxs)("div",{className:"group relative space-y-3 cursor-pointer",onClick:()=>{},children:[(0,s.jsxs)(k.eu,{className:"w-full h-auto aspect-square",children:[(0,s.jsx)(k.BK,{src:e.avatar_url??void 0,alt:e.name}),(0,s.jsx)(k.q5,{children:e.name[0]})]}),(0,s.jsxs)("div",{className:"min-h-16",children:[(0,s.jsx)("h4",{className:"font-semibold text-sm text-foreground line-clamp-2 group-hover:text-primary transition-colors",children:e.name}),(0,s.jsx)("span",{className:"inline-block mt-2 px-2 py-0.5 text-xs font-semibold bg-secondary rounded-full",children:"Artist"})]})]})}function D({album:e}){let t=(0,i.useRouter)();return(0,s.jsxs)("div",{className:"group relative space-y-3 cursor-pointer",onClick:()=>{t.push(`/album/${e.id}`)},children:[(0,s.jsx)("div",{className:"relative h-40 rounded-lg overflow-hidden bg-secondary",children:(0,s.jsx)("img",{src:e.cover_url??"/placeholder.svg",alt:e.name,className:"w-full h-full object-cover group-hover:scale-105 transition-transform duration-300"})}),(0,s.jsxs)("div",{className:"min-h-16",children:[(0,s.jsx)("h4",{className:"font-semibold text-sm text-foreground line-clamp-2 group-hover:text-primary transition-colors",children:e.name}),(0,s.jsx)("p",{className:"text-xs text-muted-foreground line-clamp-1",children:e.release_year}),(0,s.jsx)("span",{className:"inline-block mt-2 px-2 py-0.5 text-xs font-semibold bg-secondary rounded-full",children:"Album"})]})]})}function E({playlist:e}){let t=(0,i.useRouter)(),{playQueue:a}=(0,f.F)(),o=async t=>{t.stopPropagation();try{let{getPlaylistItems:t}=await Promise.resolve().then(r.bind(r,43928)),s=await t(e.id);s.length>0&&a(s)}catch(e){console.error("Error loading playlist:",e)}};return(0,s.jsxs)("div",{className:"group relative space-y-3 cursor-pointer",onClick:()=>{t.push(`/album/${e.id}`)},children:[(0,s.jsxs)("div",{className:"relative h-40 rounded-lg overflow-hidden bg-secondary",children:[(0,s.jsx)("img",{src:e.thumbnail,alt:e.title,className:"w-full h-full object-cover group-hover:scale-105 transition-transform duration-300"}),(0,s.jsx)("div",{className:"absolute inset-0 bg-black/30 opacity-0 group-hover:opacity-100 transition-opacity flex items-center justify-center",children:(0,s.jsx)(m.$,{size:"icon",className:"w-12 h-12 rounded-full bg-primary text-primary-foreground hover:bg-primary/90 shadow-xl",onClick:o,children:(0,s.jsx)("span",{className:"w-5 h-5 border-l-12 border-y-8 border-y-transparent border-l-primary-foreground ml-1"})})})]}),(0,s.jsxs)("div",{className:"min-h-16",children:[(0,s.jsx)("h4",{className:"font-semibold text-sm text-foreground line-clamp-2 group-hover:text-primary transition-colors",children:e.title}),(0,s.jsx)("p",{className:"text-xs text-muted-foreground line-clamp-1",children:e.channelTitle}),(0,s.jsx)("span",{className:"inline-block mt-2 px-2 py-0.5 text-xs font-semibold bg-secondary rounded-full",children:"Playlist"})]})]})}},23511:(e,t,r)=>{"use strict";r.d(t,{E:()=>i});var s=r(95155),a=r(91337);function i({className:e,...t}){return(0,s.jsx)("div",{"data-slot":"skeleton",className:(0,a.cn)("bg-accent animate-pulse rounded-md",e),...t})}},39658:(e,t,r)=>{"use strict";r.d(t,{p:()=>i});var s=r(95155);r(12115);var a=r(91337);function i({className:e,type:t,...r}){return(0,s.jsx)("input",{type:t,"data-slot":"input",className:(0,a.cn)("file:text-foreground placeholder:text-muted-foreground selection:bg-primary selection:text-primary-foreground dark:bg-input/30 border-input h-9 w-full min-w-0 rounded-md border bg-transparent px-3 py-1 text-base shadow-xs transition-[color,box-shadow] outline-none file:inline-flex file:h-7 file:border-0 file:bg-transparent file:text-sm file:font-medium disabled:pointer-events-none disabled:cursor-not-allowed disabled:opacity-50 md:text-sm","focus-visible:border-ring focus-visible:ring-ring/50 focus-visible:ring-[3px]","aria-invalid:ring-destructive/20 dark:aria-invalid:ring-destructive/40 aria-invalid:border-destructive",e),...r})}},41693:(e,t,r)=>{"use strict";r.d(t,{O:()=>l});var s=r(95155),a=r(37206),i=r(12115);let o=(0,a.default)(()=>Promise.all([r.e(9338),r.e(1300),r.e(8349),r.e(1018),r.e(1886),r.e(3623),r.e(6917),r.e(9619)]).then(r.bind(r,19619)).then(e=>e.TrackRowClient),{loadableGenerated:{webpack:()=>[19619]},ssr:!1}),l=(0,i.memo)(function(e){return(0,s.jsx)(o,{...e})})},43928:(e,t,r)=>{"use strict";r.d(t,{XB:()=>p,getPlaylistItems:()=>u,Pd:()=>d,K0:()=>n,eZ:()=>c});class s{get(e){let t=this.cache.get(e);return t?Date.now()-t.timestamp>t.ttl?(this.cache.delete(e),null):t.data:null}set(e,t,r=this.DEFAULT_TTL){this.cache.set(e,{data:t,timestamp:Date.now(),ttl:r})}clear(){this.cache.clear()}clearOldEntries(e=this.DEFAULT_TTL){let t=Date.now();for(let[r,s]of this.cache.entries())t-s.timestamp>e&&this.cache.delete(r)}constructor(){this.cache=new Map,this.DEFAULT_TTL=3e5}}let a=new s;function i(e,t){let r=new URLSearchParams(Object.entries(t).reduce((e,[t,r])=>(null!=r&&(e[t]=String(r)),e),{})).toString();return`${e}?${r}`}let o="AIzaSyCpbcqf4WZxq7UVJUZ-XVO7qTFpBeJE0kI",l="https://www.googleapis.com/youtube/v3";function n(e){if(!e||"string"!=typeof e)return!1;let t=e.trim();return/^[a-zA-Z0-9_-]{11}$/.test(t)}async function c(e,t){if(!o)return console.error("[v0] YouTube API key not configured"),{videos:[],playlists:[]};try{let r=i("search-youtube",{query:e});if(!t){let t=a.get(r);if(t)return console.log("[v0] Search cache hit:",e),t}let s=new URLSearchParams({part:"snippet",q:`${e} official audio`,type:"video,playlist",maxResults:"20",key:o});t&&s.append("pageToken",t);let c=await fetch(`${l}/search?${s.toString()}`);if(!c.ok)throw Error(`YouTube search failed: ${c.status}`);let d=await c.json(),u=d.items.filter(e=>"youtube#video"===e.id.kind),p=d.items.filter(e=>"youtube#playlist"===e.id.kind),g=u.map(e=>e.id.videoId).join(","),f=p.map(e=>({id:e.id.playlistId,title:e.snippet.title,description:e.snippet.description,thumbnail:e.snippet.thumbnails.high?.url||"",channelTitle:e.snippet.channelTitle})),x=[];if(g){let e=await fetch(`${l}/videos?part=contentDetails,snippet&id=${g}&key=${o}`);if(!e.ok)throw Error(`YouTube details failed: ${e.status}`);let t=(await e.json()).items.map(e=>{if(!n(e.id))return console.warn("[v0] Skipping video with invalid ID format:",e.id),null;let t=e.snippet.title,r=e.snippet.channelTitle,s=r;return t.includes(" - ")?s=t.split(" - ")[0].trim():t.includes(" | ")&&(s=t.split(" | ")[0].trim()),{id:e.id,title:m(t),artist:s,thumbnail:e.snippet.thumbnails.high?.url||"",duration:h(e.contentDetails.duration),channelTitle:r}});x.push(...t.filter(e=>null!==e))}let v={videos:x,playlists:f,nextPageToken:d.nextPageToken};return t||a.set(r,v),v}catch(e){return console.error("[v0] YouTube search error:",e),{videos:[],playlists:[]}}}async function d(){if(!o)return[];try{let e="trending-music",t=a.get(e);if(t)return console.log("[v0] Trending cache hit"),t;let r=await fetch(`${l}/videos?part=snippet,contentDetails&chart=mostPopular&regionCode=US&videoCategoryId=10&maxResults=20&key=${o}`);if(!r.ok)throw Error(`YouTube trending failed: ${r.status}`);let s=(await r.json()).items.map(e=>{let t=e.snippet.title,r=e.snippet.channelTitle,s=r;return t.includes(" - ")&&(s=t.split(" - ")[0].trim()),{id:e.id,title:m(t),artist:s,thumbnail:e.snippet.thumbnails.high?.url||"",duration:h(e.contentDetails.duration),channelTitle:r}});return a.set(e,s,36e5),s}catch(e){return console.error("[v0] YouTube trending error:",e),[]}}async function u(e,t=20){if(!o)return[];try{let r=i("playlist-items",{playlistId:e,maxResults:t}),s=a.get(r);if(s)return console.log("[v0] Playlist cache hit:",e),s;let c=await fetch(`${l}/playlistItems?part=snippet,contentDetails&playlistId=${e}&maxResults=${t}&key=${o}`);if(!c.ok)throw Error(`YouTube playlist failed: ${c.status}`);let d=(await c.json()).items.map(e=>e.contentDetails.videoId).join(",");if(!d)return[];let u=await fetch(`${l}/videos?part=contentDetails,snippet&id=${d}&key=${o}`);if(!u.ok)throw Error(`YouTube video details failed: ${u.status}`);return(await u.json()).items.map(e=>{if(!n(e.id))return console.warn("[v0] Skipping playlist item with invalid ID format:",e.id),null;let t=e.snippet.title,r=e.snippet.channelTitle,s=r;return t.includes(" - ")&&(s=t.split(" - ")[0].trim()),{id:e.id,title:m(t),artist:s,thumbnail:e.snippet.thumbnails.high?.url||"",duration:h(e.contentDetails.duration),channelTitle:r}}).filter(e=>null!==e)}catch(e){return console.error("[v0] YouTube playlist error:",e),[]}}function m(e){return e.replace(/\(Official\s*(Music\s*)?Video\)/gi,"").replace(/\[Official\s*(Music\s*)?Video\]/gi,"").replace(/\(Official\s*Audio\)/gi,"").replace(/\[Official\s*Audio\]/gi,"").replace(/\(Lyrics?\)/gi,"").replace(/\[Lyrics?\]/gi,"").replace(/\(Audio\)/gi,"").replace(/\[Audio\]/gi,"").replace(/\|.*$/g,"").replace(/\s+-\s+[^-]+$/,"").trim()}function h(e){let t=e.match(/PT(?:(\d+)H)?(?:(\d+)M)?(?:(\d+)S)?/);if(!t)return"0:00";let r=parseInt(t[1]||"0"),s=parseInt(t[2]||"0"),a=parseInt(t[3]||"0");return r>0?`${r}:${s.toString().padStart(2,"0")}:${a.toString().padStart(2,"0")}`:`${s}:${a.toString().padStart(2,"0")}`}function p(e){let t=e.split(":").map(Number);return 3===t.length?3600*t[0]+60*t[1]+t[2]:60*t[0]+(t[1]||0)}},46400:(e,t,r)=>{"use strict";r.d(t,{F:()=>i,T:()=>a});var s=r(12115);let a=(0,s.createContext)(void 0);function i(){let e=(0,s.useContext)(a);if(void 0===e)throw Error("usePlayer must be used within a PlayerProvider");return e}},54614:(e,t,r)=>{"use strict";r.d(t,{$o:()=>l,ToastProvider:()=>n});var s=r(95155),a=r(12115);let i=new Map,o=(e,t)=>{switch(t.type){case"ADD_TOAST":return{...e,toasts:[t.toast,...e.toasts].slice(0,1)};case"UPDATE_TOAST":return{...e,toasts:e.toasts.map(e=>e.id===t.toast.id?{...e,...t.toast}:e)};case"DISMISS_TOAST":{let{toastId:r}=t;return{...e,toasts:e.toasts.map(e=>e.id===r||void 0===r?{...e,open:!1}:e)}}case"REMOVE_TOAST":if(void 0===t.toastId)return{...e,toasts:[]};return{...e,toasts:e.toasts.filter(e=>e.id!==t.toastId)};default:return e}},l=a.createContext(void 0),n=({children:e})=>{let[t,r]=a.useReducer(o,{toasts:[]});return a.useEffect(()=>{t.toasts.forEach(e=>{!1===e.open&&((e,t)=>{if(i.has(e))return;let r=setTimeout(()=>{i.delete(e),t({type:"REMOVE_TOAST",toastId:e})},1e6);i.set(e,r)})(e.id,r)})},[t.toasts]),(0,s.jsx)(l.Provider,{value:{state:t,dispatch:r},children:e})}},70529:(e,t,r)=>{"use strict";r.d(t,{w:()=>i});var s=r(95155);let a=(0,r(37206).default)(()=>Promise.all([r.e(1300),r.e(1018),r.e(1886),r.e(5421)]).then(r.bind(r,5421)).then(e=>e.TrackCardClient),{loadableGenerated:{webpack:()=>[5421]},ssr:!1});function i({track:e,showArtist:t=!0}){return(0,s.jsx)(a,{track:e,showArtist:t})}},76104:(e,t,r)=>{Promise.resolve().then(r.bind(r,19171))},81890:(e,t,r)=>{"use strict";r.d(t,{d:()=>o});var s=r(12115),a=r(54614);let i=0;function o(){let e=s.useContext(a.$o);if(!e)throw Error("useToast must be used within a ToastProvider");let{state:t,dispatch:r}=e,o=s.useCallback(({...e})=>{let t=(i=(i+1)%Number.MAX_SAFE_INTEGER).toString(),s=()=>r({type:"DISMISS_TOAST",toastId:t});return r({type:"ADD_TOAST",toast:{...e,id:t,open:!0,onOpenChange:e=>{e||s()}}}),{id:t,dismiss:s}},[r]);return{...t,toast:o,dismiss:e=>r({type:"DISMISS_TOAST",toastId:e})}}},91337:(e,t,r)=>{"use strict";r.d(t,{cn:()=>i});var s=r(29722),a=r(622);function i(...e){return(0,a.QP)((0,s.$)(e))}},94674:(e,t,r)=>{"use strict";r.d(t,{BB:()=>c,UB:()=>o,WR:()=>l,hS:()=>n});var s=r(43928);let a=null;async function i(){return a||new Promise((e,t)=>{let r=indexedDB.open("pulse-music-db",2);r.onerror=()=>t(r.error),r.onsuccess=()=>{e(a=r.result)}})}async function o(e,t){let r=(await i()).transaction("downloads","readwrite").objectStore("downloads"),s={...e,downloadedAt:Date.now(),downloadStatus:"downloading",downloadProgress:0};r.put(s);try{t?.(10),e.id,s.audioUrl=`https://www.youtube.com/watch?v=${e.id}`,s.downloadStatus="completed",s.downloadProgress=100,t?.(50),r.put(s),t?.(100),console.log(`[v0] Downloaded track: ${e.title}`)}catch(t){throw console.error(`[v0] Download error for ${e.id}:`,t),s.downloadStatus="failed",r.put(s),Error(`Failed to download ${e.title}`)}}async function l(){let e=(await i()).transaction("downloads","readonly").objectStore("downloads").index("downloadStatus");return new Promise((t,r)=>{let a=e.openCursor(IDBKeyRange.only("completed"),"prev"),i=[];a.onsuccess=e=>{let r=e.target.result;if(r){let e=r.value;(0,s.K0)(e.id)?i.push(e):console.warn("[v0] Skipping downloaded track with invalid ID:",e.id),r.continue()}else t(i)},a.onerror=()=>r(a.error)})}async function n(e){let t=(await i()).transaction("downloads","readonly").objectStore("downloads");return new Promise((r,s)=>{let a=t.get(e);a.onsuccess=()=>{let e=a.result;r(!!e&&"completed"===e.downloadStatus)},a.onerror=()=>s(a.error)})}async function c(e){let t=(await i()).transaction("downloads","readwrite").objectStore("downloads");return new Promise((r,s)=>{let a=t.delete(e);a.onsuccess=()=>{console.log(`[v0] Deleted downloaded track: ${e}`),r()},a.onerror=()=>{console.error("[v0] Failed to delete downloaded track:",a.error),s(a.error)}})}},95885:(e,t,r)=>{"use strict";r.d(t,{BK:()=>l,eu:()=>o,q5:()=>n});var s=r(95155);r(12115);var a=r(5143),i=r(91337);function o({className:e,...t}){return(0,s.jsx)(a.bL,{"data-slot":"avatar",className:(0,i.cn)("relative flex size-8 shrink-0 overflow-hidden rounded-full",e),...t})}function l({className:e,...t}){return(0,s.jsx)(a._V,{"data-slot":"avatar-image",className:(0,i.cn)("aspect-square size-full",e),...t})}function n({className:e,...t}){return(0,s.jsx)(a.H4,{"data-slot":"avatar-fallback",className:(0,i.cn)("bg-muted flex size-full items-center justify-center rounded-full",e),...t})}}},e=>{e.O(0,[6679,6079,8441,3794,7358],()=>e(e.s=76104)),_N_E=e.O()}]);