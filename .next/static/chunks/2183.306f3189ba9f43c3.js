"use strict";(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[2183],{7236:(e,s,r)=>{r.d(s,{N:()=>l,U:()=>a});var t=r(19338);function a(){return(0,t.createBrowserClient)("https://nzeqnvmepoykadilajud.supabase.co","eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJzdXBhYmFzZSIsInJlZiI6Im56ZXFudm1lcG95a2FkaWxhanVkIiwicm9sZSI6ImFub24iLCJpYXQiOjE3Njg5OTMzMDAsImV4cCI6MjA4NDU2OTMwMH0.igLBLX9XCMVkAthRm4T4pHiNU4iF9c5RoI2JGYHsPrI")}let l=a()},23511:(e,s,r)=>{r.d(s,{E:()=>l});var t=r(95155),a=r(91337);function l({className:e,...s}){return(0,t.jsx)("div",{"data-slot":"skeleton",className:(0,a.cn)("bg-accent animate-pulse rounded-md",e),...s})}},49303:(e,s,r)=>{r.d(s,{Cl:()=>t,Tt:()=>a,fX:()=>n,sH:()=>l});var t=function(){return(t=Object.assign||function(e){for(var s,r=1,t=arguments.length;r<t;r++)for(var a in s=arguments[r])Object.prototype.hasOwnProperty.call(s,a)&&(e[a]=s[a]);return e}).apply(this,arguments)};function a(e,s){var r={};for(var t in e)Object.prototype.hasOwnProperty.call(e,t)&&0>s.indexOf(t)&&(r[t]=e[t]);if(null!=e&&"function"==typeof Object.getOwnPropertySymbols)for(var a=0,t=Object.getOwnPropertySymbols(e);a<t.length;a++)0>s.indexOf(t[a])&&Object.prototype.propertyIsEnumerable.call(e,t[a])&&(r[t[a]]=e[t[a]]);return r}function l(e,s,r,t){return new(r||(r=Promise))(function(a,l){function n(e){try{i(t.next(e))}catch(e){l(e)}}function c(e){try{i(t.throw(e))}catch(e){l(e)}}function i(e){var s;e.done?a(e.value):((s=e.value)instanceof r?s:new r(function(e){e(s)})).then(n,c)}i((t=t.apply(e,s||[])).next())})}function n(e,s,r){if(r||2==arguments.length)for(var t,a=0,l=s.length;a<l;a++)!t&&a in s||(t||(t=Array.prototype.slice.call(s,0,a)),t[a]=s[a]);return e.concat(t||Array.prototype.slice.call(s))}"function"==typeof SuppressedError&&SuppressedError},70289:(e,s,r)=>{r.r(s),r.d(s,{default:()=>f});var t=r(95155),a=r(12115),l=r(43928),n=r(23623),c=r(70529),i=r(23511);let o=(0,r(78340).A)("Sparkles",[["path",{d:"M9.937 15.5A2 2 0 0 0 8.5 14.063l-6.135-1.582a.5.5 0 0 1 0-.962L8.5 9.936A2 2 0 0 0 9.937 8.5l1.582-6.135a.5.5 0 0 1 .963 0L14.063 8.5A2 2 0 0 0 15.5 9.937l6.135 1.581a.5.5 0 0 1 0 .964L15.5 14.063a2 2 0 0 0-1.437 1.437l-1.582 6.135a.5.5 0 0 1-.963 0z",key:"4pj2yx"}],["path",{d:"M20 3v4",key:"1olli1"}],["path",{d:"M22 5h-4",key:"1gvqau"}],["path",{d:"M4 17v2",key:"vumght"}],["path",{d:"M5 18H3",key:"zchphs"}]]);var d=r(7236);let u="pulse-recommendations";async function h(){let{data:{user:e}}=await d.N.auth.getUser();if(!e)return[];let{data:s}=await d.N.from("listening_stats").select("artist").eq("user_id",e.id).order("play_count",{ascending:!1}).limit(5);return s?.map(e=>e.artist)||[]}async function m(){let{data:{user:e}}=await d.N.auth.getUser();return e?["electronic","hip hop","indie"]:[]}async function p(e=20){let s=new Map,[r,t]=await Promise.all([h(),m()]),a=async(e,r)=>{try{let{videos:t}=await (0,l.eZ)(e,5);t.forEach(e=>{s.has(e.id)||s.set(e.id,{...e,reason:r})})}catch(s){console.error(`Error searching for "${e}":`,s)}},n=[...r.map(e=>({query:`${e} new music`,reason:`New music from ${e}`})),...t.map(e=>({query:`new ${e} music`,reason:`New in ${e}`})),{query:"Fresh new artists",reason:"Discover new artists"},{query:"Viral hits this week",reason:"Trending this week"}];return await Promise.all(n.map(({query:e,reason:s})=>a(e,s))),Array.from(s.values()).slice(0,e)}async function g(){let e=localStorage.getItem(u);if(e)return JSON.parse(e);let s=await p();return localStorage.setItem(u,JSON.stringify(s)),s}function f(){let[e,s]=(0,a.useState)([]),[r,d]=(0,a.useState)([]),[u,h]=(0,a.useState)([]),[m,p]=(0,a.useState)([]),[f,y]=(0,a.useState)(!0),[x,w]=(0,a.useState)(!1);return((0,a.useEffect)(()=>{w(!0)},[]),(0,a.useEffect)(()=>{(async()=>{y(!0);try{let[e,r]=await Promise.all([g(),(0,l.Pd)()]);s(e),d(r)}catch(e){console.error("Error loading home data:",e)}finally{y(!1)}})()},[]),(0,a.useEffect)(()=>{x&&(async()=>{let[e,s]=await Promise.all([(0,n.aq)(),(0,n.cZ)()]);h(e),p(s)})()},[x]),f)?(0,t.jsxs)("div",{className:"space-y-8",children:[(0,t.jsx)(i.E,{className:"h-10 w-48"}),(0,t.jsx)("div",{className:"grid grid-cols-2 md:grid-cols-3 lg:grid-cols-4 gap-4",children:[...Array(8)].map((e,s)=>(0,t.jsxs)("div",{className:"space-y-3",children:[(0,t.jsx)(i.E,{className:"aspect-square rounded-lg"}),(0,t.jsx)(i.E,{className:"h-4 w-3/4"}),(0,t.jsx)(i.E,{className:"h-3 w-1/2"})]},s))})]}):(0,t.jsxs)("div",{className:"space-y-10",children:[(0,t.jsx)("h1",{className:"text-3xl font-bold text-foreground",children:"For You"}),e.length>0&&(0,t.jsxs)("section",{className:"space-y-4",children:[(0,t.jsxs)("div",{className:"flex items-center gap-2",children:[(0,t.jsx)(o,{className:"w-5 h-5 text-primary"}),(0,t.jsx)("h2",{className:"text-2xl font-bold text-foreground",children:"Made For You"})]}),(0,t.jsx)("div",{className:"grid grid-cols-2 sm:grid-cols-3 md:grid-cols-4 lg:grid-cols-5 xl:grid-cols-6 gap-4",children:e.map(e=>(0,t.jsx)(c.w,{track:e,showReason:!0},e.id))})]}),r.length>0&&(0,t.jsxs)("section",{className:"space-y-4",children:[(0,t.jsx)("h2",{className:"text-2xl font-bold text-foreground",children:"Trending"}),(0,t.jsx)("div",{className:"grid grid-cols-2 sm:grid-cols-3 md:grid-cols-4 lg:grid-cols-5 xl:grid-cols-6 gap-4",children:r.map(e=>(0,t.jsx)(c.w,{track:e},e.id))})]}),x&&u.length>0&&(0,t.jsxs)("section",{className:"space-y-4",children:[(0,t.jsx)("h2",{className:"text-2xl font-bold text-foreground",children:"Recently Played"}),(0,t.jsx)("div",{className:"grid grid-cols-2 sm:grid-cols-3 md:grid-cols-4 lg:grid-cols-5 xl:grid-cols-6 gap-4",children:u.map(e=>(0,t.jsx)(c.w,{track:e},e.id))})]}),x&&m.length>0&&(0,t.jsxs)("section",{className:"space-y-4",children:[(0,t.jsx)("h2",{className:"text-2xl font-bold text-foreground",children:"Liked Songs"}),(0,t.jsx)("div",{className:"grid grid-cols-2 sm:grid-cols-3 md:grid-cols-4 lg:grid-cols-5 xl:grid-cols-6 gap-4",children:m.map(e=>(0,t.jsx)(c.w,{track:e},e.id))})]})]})}},70529:(e,s,r)=>{r.d(s,{w:()=>l});var t=r(95155);let a=(0,r(37206).default)(()=>Promise.all([r.e(1300),r.e(1018),r.e(1886),r.e(5421)]).then(r.bind(r,5421)).then(e=>e.TrackCardClient),{loadableGenerated:{webpack:()=>[5421]},ssr:!1});function l({track:e,showArtist:s=!0}){return(0,t.jsx)(a,{track:e,showArtist:s})}},91337:(e,s,r)=>{r.d(s,{cn:()=>l});var t=r(29722),a=r(622);function l(...e){return(0,a.QP)((0,t.$)(e))}}}]);