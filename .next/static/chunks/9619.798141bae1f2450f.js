"use strict";(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[9619],{6962:(e,t,a)=>{a.d(t,{A:()=>s});let s=(0,a(78340).A)("Download",[["path",{d:"M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4",key:"ih7n3h"}],["polyline",{points:"7 10 12 15 17 10",key:"2ggqvy"}],["line",{x1:"12",x2:"12",y1:"15",y2:"3",key:"1vk2je"}]])},7686:(e,t,a)=>{a.d(t,{A:()=>s});let s=(0,a(78340).A)("Heart",[["path",{d:"M19 14c1.49-1.46 3-3.21 3-5.5A5.5 5.5 0 0 0 16.5 3c-1.76 0-3 .5-4.5 2-1.5-1.5-2.74-2-4.5-2A5.5 5.5 0 0 0 2 8.5c0 2.3 1.5 4.05 3 5.5l7 7Z",key:"c3ymky"}]])},19619:(e,t,a)=>{a.r(t),a.d(t,{TrackRowClient:()=>A});var s=a(95155),i=a(34152),n=a(20232),r=a(52484),o=a(68459),l=a(6962),d=a(60285),c=a(40245),u=a(51914),m=a(7686),h=a(46400),p=a(4474),x=a(43447),f=a(12115),y=a(23623),g=a(94674),k=a(91337),v=a(7236),w=a(56995),j=a(97784),b=a(76537),_=a(81890),N=a(81400);function A({track:e,index:t,onDownloadClick:a,downloadProgress:A=0,isDownloading:M=!1,isDownloaded:C,onAddToPlaylistSuccess:q}){let{playSong:P,addToQueue:S,currentSong:z,isPlaying:L,togglePlayPause:D}=(0,h.F)(),{toast:T}=(0,_.d)(),[E,H]=(0,f.useState)(!1),[F,V]=(0,f.useState)(!1),[$,I]=(0,f.useState)(!1),[Z,B]=(0,f.useState)(C),[O,G]=(0,f.useState)(!1),[U,W]=(0,f.useState)([]),X=void 0!==Z?Z:F,Q=z?.id===e.id,R=Q&&L;(0,f.useEffect)(()=>{(0,y.BC)(e.id).then(H)},[e.id]),(0,f.useEffect)(()=>{B(C),void 0===C?(0,g.hS)(e.id).then(V):V(C)},[e.id,C]);let J=e=>{e.length>0&&W(t=>[...t,...e])},K=(0,f.useCallback)(()=>{Q?D():P(e)},[Q,e,D,P]),Y=(0,f.useCallback)(async()=>{try{let{data:{user:t}}=await v.N.auth.getUser();if(E)await (0,y.sr)(e.id),H(!1),t&&await (0,w.ZK)(e.id,{offline:!0});else{await (0,y.r9)(e),H(!0);let{newAchievements:a}=(0,b.recordLike)();J(a),t&&await (0,w.A1)(e,{offline:!0})}}catch(e){console.error("[v0] Error updating like:",e),H(!E),T({title:"Error",description:"Failed to update like status.",variant:"destructive"})}},[E,e,T]),ee=(0,f.useCallback)(async t=>{t.preventDefault(),t.stopPropagation();try{await (0,g.BB)(e.id),V(!1),B(void 0)}catch(e){console.error("[v0] Failed to delete download:",e),T({title:"Error",description:"Failed to delete download.",variant:"destructive"})}},[e.id,T]),et=(0,f.useCallback)(e=>{e.preventDefault(),e.stopPropagation(),a?.();let{newAchievements:t}=(0,b.kt)();J(t)},[a]);return(0,s.jsxs)(s.Fragment,{children:[U.map((e,t)=>(0,s.jsx)(N.F,{title:e.title,description:e.description,onClose:()=>W(t=>t.filter(t=>t.id!==e.id))},e.id)),(0,s.jsxs)("div",{className:(0,k.cn)("group flex items-center gap-2 sm:gap-4 px-2 sm:px-4 py-2 rounded-md hover:bg-card/60 transition-colors w-full",Q&&"bg-card/40"),onMouseEnter:()=>I(!0),onMouseLeave:()=>I(!1),children:[(0,s.jsxs)("div",{className:"w-6 sm:w-8 flex items-center justify-center shrink-0",children:[(0,s.jsx)(p.$,{variant:"ghost",size:"icon",className:"w-6 h-6 p-0 flex sm:hidden",onClick:K,children:R?(0,s.jsx)(i.A,{className:"w-4 h-4"}):(0,s.jsx)(n.A,{className:"w-4 h-4 fill-current"})}),(0,s.jsx)("div",{className:"hidden sm:flex items-center justify-center w-full h-full",children:$||R?(0,s.jsx)(p.$,{variant:"ghost",size:"icon",className:"w-6 h-6 p-0",onClick:K,children:R?(0,s.jsx)(i.A,{className:"w-4 h-4"}):(0,s.jsx)(n.A,{className:"w-4 h-4 fill-current"})}):(0,s.jsx)("span",{className:(0,k.cn)("text-xs sm:text-sm tabular-nums",Q?"text-primary":"text-muted-foreground"),children:t})})]}),(0,s.jsx)("div",{className:"w-8 sm:w-10 h-8 sm:h-10 rounded overflow-hidden bg-secondary shrink-0",children:e.thumbnail?(0,s.jsx)("img",{src:e.thumbnail,alt:e.title,className:"w-full h-full object-cover"}):(0,s.jsx)("div",{className:"w-full h-full flex items-center justify-center bg-primary/10",children:(0,s.jsx)("span",{className:"text-xs sm:text-sm font-bold text-primary",children:e.title[0]})})}),(0,s.jsxs)("div",{className:"flex-1 min-w-0",children:[(0,s.jsx)("h3",{className:(0,k.cn)("font-medium text-xs sm:text-sm truncate",Q?"text-primary":"text-foreground"),children:e.title}),(0,s.jsx)("p",{className:"text-xs text-muted-foreground truncate hidden sm:block",children:e.artist})]}),M&&(0,s.jsxs)("div",{className:"flex items-center gap-1 sm:gap-2 w-20 sm:w-24 shrink-0",children:[(0,s.jsx)("div",{className:"flex-1 bg-secondary rounded-full h-1 overflow-hidden",children:(0,s.jsx)("div",{className:"bg-green-500 h-full",style:{width:`${A}%`}})}),(0,s.jsxs)("span",{className:"text-xs text-muted-foreground hidden sm:inline",children:[A,"%"]})]}),!M&&(0,s.jsx)(s.Fragment,{children:X?(0,s.jsxs)("div",{className:"flex items-center gap-1 sm:gap-2 shrink-0",children:[(0,s.jsx)(r.A,{className:"w-4 h-4 text-green-500 shrink-0"}),(0,s.jsx)(p.$,{variant:"ghost",size:"icon",className:"w-6 h-8 p-0 opacity-0 group-hover:opacity-100",onClick:ee,title:"Delete download",children:(0,s.jsx)(o.A,{className:"w-4 h-4 text-red-500"})})]}):(0,s.jsx)(p.$,{variant:"ghost",size:"icon",className:"w-6 h-8 p-0 opacity-0 group-hover:opacity-100",onClick:et,title:"Download",disabled:M,children:(0,s.jsx)(l.A,{className:"w-4 h-4"})})}),(0,s.jsx)("span",{className:"text-xs sm:text-sm text-muted-foreground w-10 sm:w-12 text-right hidden sm:block",children:e.duration}),(0,s.jsx)("div",{children:(0,s.jsxs)(x.rI,{children:[(0,s.jsx)(x.ty,{asChild:!0,children:(0,s.jsx)(p.$,{variant:"ghost",size:"icon",className:"w-6 sm:w-8 h-6 sm:h-8 p-0 opacity-100 sm:opacity-0 sm:group-hover:opacity-100",children:(0,s.jsx)(d.A,{className:"w-3 sm:w-4 h-3 sm:h-4"})})}),(0,s.jsxs)(x.SQ,{align:"end",className:"w-48",children:[(0,s.jsxs)(x._2,{onClick:()=>S(e),children:[(0,s.jsx)(c.A,{className:"w-4 h-4 mr-2"}),"Add to queue"]}),(0,s.jsxs)(x._2,{onClick:e=>{e.preventDefault(),e.stopPropagation(),G(!0)},children:[(0,s.jsx)(u.A,{className:"w-4 h-4 mr-2"}),"Add to Playlist"]}),(0,s.jsxs)(x._2,{onClick:Y,children:[(0,s.jsx)(m.A,{className:"w-4 h-4 mr-2"}),E?"Remove from Liked":"Add to Liked"]}),X?(0,s.jsxs)(x._2,{onClick:ee,children:[(0,s.jsx)(o.A,{className:"w-4 h-4 mr-2"}),"Delete download"]}):(0,s.jsxs)(x._2,{onClick:et,disabled:M,children:[(0,s.jsx)(l.A,{className:"w-4 h-4 mr-2"}),M?"Downloading...":"Save offline"]})]})]})}),(0,s.jsx)(j.X,{open:O,onOpenChange:G,song:e,onAddSuccess:q})]})]})}},20232:(e,t,a)=>{a.d(t,{A:()=>s});let s=(0,a(78340).A)("Play",[["polygon",{points:"6 3 20 12 6 21 6 3",key:"1oa8hb"}]])},33210:(e,t,a)=>{a.d(t,{A:()=>s});let s=(0,a(78340).A)("X",[["path",{d:"M18 6 6 18",key:"1bl5f8"}],["path",{d:"m6 6 12 12",key:"d8bk6v"}]])},34152:(e,t,a)=>{a.d(t,{A:()=>s});let s=(0,a(78340).A)("Pause",[["rect",{x:"14",y:"4",width:"4",height:"16",rx:"1",key:"zuxfzm"}],["rect",{x:"6",y:"4",width:"4",height:"16",rx:"1",key:"1okwgv"}]])},40245:(e,t,a)=>{a.d(t,{A:()=>s});let s=(0,a(78340).A)("ListPlus",[["path",{d:"M11 12H3",key:"51ecnj"}],["path",{d:"M16 6H3",key:"1wxfjs"}],["path",{d:"M16 18H3",key:"12xzn7"}],["path",{d:"M18 9v6",key:"1twb98"}],["path",{d:"M21 12h-6",key:"bt1uis"}]])},43447:(e,t,a)=>{a.d(t,{M5:()=>h,SQ:()=>d,_2:()=>c,lv:()=>u,nV:()=>m,rI:()=>o,ty:()=>l});var s=a(95155);a(12115);var i=a(57463),n=a(21362),r=a(91337);function o({...e}){return(0,s.jsx)(i.bL,{"data-slot":"dropdown-menu",...e})}function l({...e}){return(0,s.jsx)(i.l9,{"data-slot":"dropdown-menu-trigger",...e})}function d({className:e,sideOffset:t=4,...a}){return(0,s.jsx)(i.ZL,{children:(0,s.jsx)(i.UC,{"data-slot":"dropdown-menu-content",sideOffset:t,className:(0,r.cn)("bg-popover text-popover-foreground data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[side=bottom]:slide-in-from-top-2 data-[side=left]:slide-in-from-right-2 data-[side=right]:slide-in-from-left-2 data-[side=top]:slide-in-from-bottom-2 z-50 max-h-(--radix-dropdown-menu-content-available-height) min-w-[8rem] origin-(--radix-dropdown-menu-content-transform-origin) overflow-x-hidden overflow-y-auto rounded-md border p-1 shadow-md",e),...a})})}function c({className:e,inset:t,variant:a="default",...n}){return(0,s.jsx)(i.q7,{"data-slot":"dropdown-menu-item","data-inset":t,"data-variant":a,className:(0,r.cn)("focus:bg-accent focus:text-accent-foreground data-[variant=destructive]:text-destructive data-[variant=destructive]:focus:bg-destructive/10 dark:data-[variant=destructive]:focus:bg-destructive/20 data-[variant=destructive]:focus:text-destructive data-[variant=destructive]:*:[svg]:!text-destructive [&_svg:not([class*='text-'])]:text-muted-foreground relative flex cursor-default items-center gap-2 rounded-sm px-2 py-1.5 text-sm outline-hidden select-none data-[disabled]:pointer-events-none data-[disabled]:opacity-50 data-[inset]:pl-8 [&_svg]:pointer-events-none [&_svg]:shrink-0 [&_svg:not([class*='size-'])]:size-4",e),...n})}function u({...e}){return(0,s.jsx)(i.Pb,{"data-slot":"dropdown-menu-sub",...e})}function m({className:e,inset:t,children:a,...o}){return(0,s.jsxs)(i.ZP,{"data-slot":"dropdown-menu-sub-trigger","data-inset":t,className:(0,r.cn)("focus:bg-accent focus:text-accent-foreground data-[state=open]:bg-accent data-[state=open]:text-accent-foreground [&_svg:not([class*='text-'])]:text-muted-foreground flex cursor-default items-center gap-2 rounded-sm px-2 py-1.5 text-sm outline-hidden select-none data-[inset]:pl-8 [&_svg]:pointer-events-none [&_svg]:shrink-0 [&_svg:not([class*='size-'])]:size-4",e),...o,children:[a,(0,s.jsx)(n.A,{className:"ml-auto size-4"})]})}function h({className:e,...t}){return(0,s.jsx)(i.G5,{"data-slot":"dropdown-menu-sub-content",className:(0,r.cn)("bg-popover text-popover-foreground data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[side=bottom]:slide-in-from-top-2 data-[side=left]:slide-in-from-right-2 data-[side=right]:slide-in-from-left-2 data-[side=top]:slide-in-from-bottom-2 z-50 min-w-[8rem] origin-(--radix-dropdown-menu-content-transform-origin) overflow-hidden rounded-md border p-1 shadow-lg",e),...t})}},51914:(e,t,a)=>{a.d(t,{A:()=>s});let s=(0,a(78340).A)("Plus",[["path",{d:"M5 12h14",key:"1ays0h"}],["path",{d:"M12 5v14",key:"s699le"}]])},52484:(e,t,a)=>{a.d(t,{A:()=>s});let s=(0,a(78340).A)("CircleCheckBig",[["path",{d:"M21.801 10A10 10 0 1 1 17 3.335",key:"yps3ct"}],["path",{d:"m9 11 3 3L22 4",key:"1pflzl"}]])},60285:(e,t,a)=>{a.d(t,{A:()=>s});let s=(0,a(78340).A)("Ellipsis",[["circle",{cx:"12",cy:"12",r:"1",key:"41hilf"}],["circle",{cx:"19",cy:"12",r:"1",key:"1wjl8i"}],["circle",{cx:"5",cy:"12",r:"1",key:"1pcz8c"}]])},68459:(e,t,a)=>{a.d(t,{A:()=>s});let s=(0,a(78340).A)("Trash2",[["path",{d:"M3 6h18",key:"d0wm0j"}],["path",{d:"M19 6v14c0 1-1 2-2 2H7c-1 0-2-1-2-2V6",key:"4alrt4"}],["path",{d:"M8 6V4c0-1 1-2 2-2h4c1 0 2 1 2 2v2",key:"v07s0e"}],["line",{x1:"10",x2:"10",y1:"11",y2:"17",key:"1uufr5"}],["line",{x1:"14",x2:"14",y1:"11",y2:"17",key:"xtxkd"}]])},76537:(e,t,a)=>{a.d(t,{$S:()=>y,Zf:()=>f,eI:()=>k,kt:()=>p,recordLike:()=>m,recordPlay:()=>u,recordPlaylistCreate:()=>h,sH:()=>g,uL:()=>x});var s=a(98349),i=a.n(s);let n="user_gamification_data",r=[0,100,250,500,800,1200,1700,2300,3e3,4e3,5200,6500,8e3,1e4,12500,15500,19e3,23e3,28e3,35e3],o=[{id:"first-play",title:"First Note",description:"Play your first track",icon:"play",category:"listening",requirement:1},{id:"tracks-10",title:"Getting Started",description:"Play 10 tracks",icon:"music",category:"listening",requirement:10},{id:"tracks-50",title:"Music Lover",description:"Play 50 tracks",icon:"headphones",category:"listening",requirement:50},{id:"tracks-100",title:"Audiophile",description:"Play 100 tracks",icon:"disc",category:"listening",requirement:100},{id:"minutes-60",title:"Hour Power",description:"Listen for 60 minutes",icon:"clock",category:"listening",requirement:60},{id:"minutes-600",title:"Marathon Listener",description:"Listen for 10 hours",icon:"timer",category:"listening",requirement:600},{id:"streak-3",title:"Hat Trick",description:"3-day listening streak",icon:"flame",category:"streak",requirement:3},{id:"streak-7",title:"Weekly Warrior",description:"7-day listening streak",icon:"fire",category:"streak",requirement:7},{id:"streak-30",title:"Monthly Master",description:"30-day listening streak",icon:"trophy",category:"streak",requirement:30},{id:"likes-5",title:"Picky Listener",description:"Like 5 tracks",icon:"heart",category:"collection",requirement:5},{id:"likes-25",title:"Curator",description:"Like 25 tracks",icon:"heart-filled",category:"collection",requirement:25},{id:"likes-100",title:"Tastemaker",description:"Like 100 tracks",icon:"star",category:"collection",requirement:100},{id:"playlist-1",title:"DJ Beginner",description:"Create your first playlist",icon:"list-music",category:"collection",requirement:1},{id:"playlist-5",title:"Playlist Pro",description:"Create 5 playlists",icon:"list-plus",category:"collection",requirement:5},{id:"download-1",title:"Offline Explorer",description:"Download your first track",icon:"download",category:"collection",requirement:1},{id:"download-10",title:"On-the-Go",description:"Download 10 tracks",icon:"download-cloud",category:"collection",requirement:10},{id:"share-1",title:"Spreading the Word",description:"Share your first track",icon:"share",category:"social",requirement:1},{id:"share-10",title:"Socialite",description:"Share 10 tracks",icon:"share-2",category:"social",requirement:10}];async function l(){return await i().getItem(n)||{xp:0,level:1,streak:0,longest_streak:0,last_listened_date:null,total_tracks_played:0,total_listening_minutes:0,total_likes:0,total_playlists:0,total_downloads:0,total_shares:0,unlocked_achievements:new Set}}async function d(e){await i().setItem(n,e)}async function c(e,t){let a=await l(),s=a.level;t(a);let i=a.xp+e;a.xp=i;let n=function(e){for(let t=r.length-1;t>=0;t--)if(e>=r[t])return t+1;return 1}(i),c=n>s;a.level=n;let u=function(e){let t=[];for(let a of o){if(e.unlocked_achievements.has(a.id))continue;let s=0;switch(a.category){case"listening":s=a.id.includes("tracks")?e.total_tracks_played:a.id.includes("minutes")?e.total_listening_minutes:e.total_tracks_played;break;case"streak":s=e.streak;break;case"collection":a.id.includes("like")?s=e.total_likes:a.id.includes("playlist")?s=e.total_playlists:a.id.includes("download")&&(s=e.total_downloads);break;case"social":s=e.total_shares}s>=a.requirement&&(t.push(a),e.unlocked_achievements.add(a.id))}return t}(a);return await d(a),{newAchievements:u,leveledUp:c,newXp:i,userState:a}}function u(e=0){return c(10,t=>{t.total_tracks_played+=1,t.total_listening_minutes+=Math.round(e/60);let a=new Date().toDateString();if(t.last_listened_date!==a){let e=new Date(Date.now()-864e5).toDateString();t.last_listened_date===e?t.streak+=1:t.streak=1,t.last_listened_date=a,t.streak>t.longest_streak&&(t.longest_streak=t.streak)}})}function m(){return c(5,e=>{e.total_likes+=1})}function h(){return c(25,e=>{e.total_playlists+=1})}function p(){return c(15,e=>{e.total_downloads+=1})}let x=l;function f(e){for(let t=r.length-1;t>=0;t--)if(e>=r[t])return t+1;return 1}function y(e){return e>=r.length?2*r[r.length-1]:r[e]??r[0]}function g(e,t){let a=r[t-1]||0,s=y(t);return s===a?0:Math.min(Math.max((e-a)/(s-a)*100,0),100)}function k(e){let t=["Newbie","Listener","Fan","Enthusiast","Devotee","Connoisseur","Expert","Master","Legend","Virtuoso","Maestro","Prodigy","Savant","Luminary","Icon","Phenom","Oracle","Titan","Deity","Transcendent"];return t[Math.min(e-1,t.length-1)]||"Transcendent"}},81400:(e,t,a)=>{a.d(t,{F:()=>l});var s=a(95155),i=a(12115),n=a(94928),r=a(33210),o=a(91337);function l({title:e,description:t,onClose:a}){let[l,d]=(0,i.useState)(!1);return(0,i.useEffect)(()=>{let e=setTimeout(()=>d(!0),100),t=setTimeout(()=>{d(!1),setTimeout(a,300)},5e3);return()=>{clearTimeout(e),clearTimeout(t)}},[a]),(0,s.jsx)("div",{className:(0,o.cn)("fixed top-4 left-1/2 -translate-x-1/2 z-[200] transition-all duration-300",l?"opacity-100 translate-y-0":"opacity-0 -translate-y-4"),children:(0,s.jsxs)("div",{className:"flex items-center gap-3 px-5 py-3 rounded-xl bg-card border border-primary/30 shadow-2xl shadow-primary/10 backdrop-blur-xl max-w-sm",children:[(0,s.jsx)("div",{className:"w-10 h-10 rounded-lg bg-primary/20 flex items-center justify-center shrink-0 animate-achievement",children:(0,s.jsx)(n.A,{className:"w-5 h-5 text-primary"})}),(0,s.jsxs)("div",{className:"flex-1 min-w-0",children:[(0,s.jsx)("p",{className:"text-sm font-bold text-foreground",children:"Achievement Unlocked!"}),(0,s.jsx)("p",{className:"text-xs text-primary font-medium",children:e}),(0,s.jsx)("p",{className:"text-xs text-muted-foreground truncate",children:t})]}),(0,s.jsx)("button",{onClick:a,className:"shrink-0 text-muted-foreground hover:text-foreground",children:(0,s.jsx)(r.A,{className:"w-4 h-4"})})]})})}},94928:(e,t,a)=>{a.d(t,{A:()=>s});let s=(0,a(78340).A)("Trophy",[["path",{d:"M6 9H4.5a2.5 2.5 0 0 1 0-5H6",key:"17hqa7"}],["path",{d:"M18 9h1.5a2.5 2.5 0 0 0 0-5H18",key:"lmptdp"}],["path",{d:"M4 22h16",key:"57wxv0"}],["path",{d:"M10 14.66V17c0 .55-.47.98-.97 1.21C7.85 18.75 7 20.24 7 22",key:"1nw9bq"}],["path",{d:"M14 14.66V17c0 .55.47.98.97 1.21C16.15 18.75 17 20.24 17 22",key:"1np0yb"}],["path",{d:"M18 2H6v7a6 6 0 0 0 12 0V2Z",key:"u46fv3"}]])},97784:(e,t,a)=>{a.d(t,{X:()=>n});var s=a(95155);let i=(0,a(37206).default)(()=>a.e(7380).then(a.bind(a,87380)).then(e=>e.AddToPlaylistDialogClient),{loadableGenerated:{webpack:()=>[87380]},ssr:!1});function n(e){return(0,s.jsx)(i,{...e})}}}]);