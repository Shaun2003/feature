"use strict";(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[8351],{15306:(t,e,r)=>{r.d(e,{Xi:()=>l,av:()=>c,j7:()=>o,tU:()=>s});var i=r(95155);r(12115);var n=r(57518),a=r(91337);function s({className:t,...e}){return(0,i.jsx)(n.bL,{"data-slot":"tabs",className:(0,a.cn)("flex flex-col gap-2",t),...e})}function o({className:t,...e}){return(0,i.jsx)(n.B8,{"data-slot":"tabs-list",className:(0,a.cn)("bg-muted text-muted-foreground inline-flex h-9 w-fit items-center justify-center rounded-lg p-[3px]",t),...e})}function l({className:t,...e}){return(0,i.jsx)(n.l9,{"data-slot":"tabs-trigger",className:(0,a.cn)("data-[state=active]:bg-background dark:data-[state=active]:text-foreground focus-visible:border-ring focus-visible:ring-ring/50 focus-visible:outline-ring dark:data-[state=active]:border-input dark:data-[state=active]:bg-input/30 text-foreground dark:text-muted-foreground inline-flex h-[calc(100%-1px)] flex-1 items-center justify-center gap-1.5 rounded-md border border-transparent px-2 py-1 text-sm font-medium whitespace-nowrap transition-[color,box-shadow] focus-visible:ring-[3px] focus-visible:outline-1 disabled:pointer-events-none disabled:opacity-50 data-[state=active]:shadow-sm [&_svg]:pointer-events-none [&_svg]:shrink-0 [&_svg:not([class*='size-'])]:size-4",t),...e})}function c({className:t,...e}){return(0,i.jsx)(n.UC,{"data-slot":"tabs-content",className:(0,a.cn)("flex-1 outline-none",t),...e})}},24683:(t,e,r)=>{r.d(e,{k:()=>s});var i=r(95155);r(12115);var n=r(29885),a=r(91337);function s({className:t,value:e,...r}){return(0,i.jsx)(n.bL,{"data-slot":"progress",className:(0,a.cn)("bg-primary/20 relative h-2 w-full overflow-hidden rounded-full",t),...r,children:(0,i.jsx)(n.C1,{"data-slot":"progress-indicator",className:"bg-primary h-full w-full flex-1 transition-all",style:{transform:`translateX(-${100-(e||0)}%)`}})})}},30783:(t,e,r)=>{r.d(e,{$I:()=>l,Gp:()=>o,WD:()=>c,Yw:()=>s,Ze:()=>a});let i=null;async function n(){return i||new Promise((t,e)=>{let r=indexedDB.open("pulse-music-stats",1);r.onerror=()=>e(r.error),r.onsuccess=()=>{t(i=r.result)},r.onupgradeneeded=t=>{let e=t.target.result;if(!e.objectStoreNames.contains("trackStats")){let t=e.createObjectStore("trackStats",{keyPath:"trackId"});t.createIndex("playCount","playCount",{unique:!1}),t.createIndex("lastPlayed","lastPlayed",{unique:!1})}if(!e.objectStoreNames.contains("listeningHistory")){let t=e.createObjectStore("listeningHistory",{keyPath:"id",autoIncrement:!0});t.createIndex("timestamp","timestamp",{unique:!1}),t.createIndex("date","date",{unique:!1})}}})}async function a(t){try{let e=(await n()).transaction(["trackStats","listeningHistory"],"readwrite"),r=e.objectStore("trackStats"),i=await new Promise(e=>{let i=r.get(t.id);i.onsuccess=()=>e(i.result)}),a=Date.now(),s="string"==typeof t.duration?parseInt(t.duration,10)||0:t.duration||0,o={trackId:t.id,title:t.title,artist:t.channelTitle,playCount:(i?.playCount||0)+1,lastPlayed:a,totalListeningTime:(i?.totalListeningTime||0)+s,likedAt:i?.likedAt,addedToPlaylistCount:i?.addedToPlaylistCount||0};await new Promise((t,e)=>{let i=r.put(o);i.onsuccess=()=>t(),i.onerror=()=>e(i.error)});let l=e.objectStore("listeningHistory");await new Promise((e,r)=>{let i=l.add({trackId:t.id,title:t.title,artist:t.channelTitle,duration:t.duration,timestamp:a,date:new Date(a).toISOString().split("T")[0]});i.onsuccess=()=>e(),i.onerror=()=>r(i.error)})}catch(t){console.error("[Stats] Error recording play:",t)}}async function s(t=10){try{let e=(await n()).transaction("trackStats","readonly").objectStore("trackStats").index("playCount");return new Promise((r,i)=>{let n=e.openCursor(null,"prev"),a=[];n.onsuccess=e=>{let i=e.target.result;i&&a.length<t?(a.push(i.value),i.continue()):r(a)},n.onerror=()=>i(n.error)})}catch(t){return console.error("[Stats] Error getting top tracks:",t),[]}}async function o(t=10){try{let e=await s(100),r=new Map;return e.forEach(t=>{let e=r.get(t.artist)||{artist:t.artist,playCount:0,totalListeningTime:0,topTracks:[]};e.playCount+=t.playCount,e.totalListeningTime+=t.totalListeningTime,e.topTracks.push(t),r.set(t.artist,e)}),Array.from(r.values()).sort((t,e)=>e.playCount-t.playCount).slice(0,t).map(t=>({...t,topTracks:t.topTracks.slice(0,3)}))}catch(t){return console.error("[Stats] Error getting top artists:",t),[]}}async function l(){try{let t=(await n()).transaction(["trackStats","listeningHistory"],"readonly"),e=await new Promise((e,r)=>{let i=t.objectStore("trackStats"),n=[],a=i.openCursor();a.onsuccess=t=>{let r=t.target.result;r?(n.push(r.value),r.continue()):e(n)},a.onerror=()=>r(a.error)}),r=Date.now(),i=r-6048e5,a=r-2592e6,s=e.filter(t=>t.lastPlayed>=i),l=e.filter(t=>t.lastPlayed>=a),c=e.sort((t,e)=>e.playCount-t.playCount).slice(0,10),d=await o(5);return{totalTracks:e.length,totalArtists:new Set(e.map(t=>t.artist)).size,totalListeningTime:e.reduce((t,e)=>t+e.totalListeningTime,0),averageTrackLength:e.length>0?e.reduce((t,e)=>t+e.totalListeningTime,0)/e.length:0,topTracks:c,topArtists:d,likedTracksCount:e.filter(t=>t.likedAt).length,playlistsCount:0,lastListenedAt:Math.max(...e.map(t=>t.lastPlayed)),thisWeekListeningTime:s.reduce((t,e)=>t+e.totalListeningTime,0),thisMonthListeningTime:l.reduce((t,e)=>t+e.totalListeningTime,0)}}catch(t){return console.error("[Stats] Error getting listening stats:",t),{totalTracks:0,totalArtists:0,totalListeningTime:0,averageTrackLength:0,topTracks:[],topArtists:[],likedTracksCount:0,playlistsCount:0,lastListenedAt:0,thisWeekListeningTime:0,thisMonthListeningTime:0}}}function c(t){let e=Math.floor(t/3600),r=Math.floor(t%3600/60);return 0===e?`${r}m`:`${e}h ${r}m`}},76537:(t,e,r)=>{r.d(e,{$S:()=>f,Zf:()=>m,eI:()=>w,kt:()=>y,recordLike:()=>g,recordPlay:()=>u,recordPlaylistCreate:()=>p,sH:()=>h,uL:()=>k});var i=r(98349),n=r.n(i);let a="user_gamification_data",s=[0,100,250,500,800,1200,1700,2300,3e3,4e3,5200,6500,8e3,1e4,12500,15500,19e3,23e3,28e3,35e3],o=[{id:"first-play",title:"First Note",description:"Play your first track",icon:"play",category:"listening",requirement:1},{id:"tracks-10",title:"Getting Started",description:"Play 10 tracks",icon:"music",category:"listening",requirement:10},{id:"tracks-50",title:"Music Lover",description:"Play 50 tracks",icon:"headphones",category:"listening",requirement:50},{id:"tracks-100",title:"Audiophile",description:"Play 100 tracks",icon:"disc",category:"listening",requirement:100},{id:"minutes-60",title:"Hour Power",description:"Listen for 60 minutes",icon:"clock",category:"listening",requirement:60},{id:"minutes-600",title:"Marathon Listener",description:"Listen for 10 hours",icon:"timer",category:"listening",requirement:600},{id:"streak-3",title:"Hat Trick",description:"3-day listening streak",icon:"flame",category:"streak",requirement:3},{id:"streak-7",title:"Weekly Warrior",description:"7-day listening streak",icon:"fire",category:"streak",requirement:7},{id:"streak-30",title:"Monthly Master",description:"30-day listening streak",icon:"trophy",category:"streak",requirement:30},{id:"likes-5",title:"Picky Listener",description:"Like 5 tracks",icon:"heart",category:"collection",requirement:5},{id:"likes-25",title:"Curator",description:"Like 25 tracks",icon:"heart-filled",category:"collection",requirement:25},{id:"likes-100",title:"Tastemaker",description:"Like 100 tracks",icon:"star",category:"collection",requirement:100},{id:"playlist-1",title:"DJ Beginner",description:"Create your first playlist",icon:"list-music",category:"collection",requirement:1},{id:"playlist-5",title:"Playlist Pro",description:"Create 5 playlists",icon:"list-plus",category:"collection",requirement:5},{id:"download-1",title:"Offline Explorer",description:"Download your first track",icon:"download",category:"collection",requirement:1},{id:"download-10",title:"On-the-Go",description:"Download 10 tracks",icon:"download-cloud",category:"collection",requirement:10},{id:"share-1",title:"Spreading the Word",description:"Share your first track",icon:"share",category:"social",requirement:1},{id:"share-10",title:"Socialite",description:"Share 10 tracks",icon:"share-2",category:"social",requirement:10}];async function l(){return await n().getItem(a)||{xp:0,level:1,streak:0,longest_streak:0,last_listened_date:null,total_tracks_played:0,total_listening_minutes:0,total_likes:0,total_playlists:0,total_downloads:0,total_shares:0,unlocked_achievements:new Set}}async function c(t){await n().setItem(a,t)}async function d(t,e){let r=await l(),i=r.level;e(r);let n=r.xp+t;r.xp=n;let a=function(t){for(let e=s.length-1;e>=0;e--)if(t>=s[e])return e+1;return 1}(n),d=a>i;r.level=a;let u=function(t){let e=[];for(let r of o){if(t.unlocked_achievements.has(r.id))continue;let i=0;switch(r.category){case"listening":i=r.id.includes("tracks")?t.total_tracks_played:r.id.includes("minutes")?t.total_listening_minutes:t.total_tracks_played;break;case"streak":i=t.streak;break;case"collection":r.id.includes("like")?i=t.total_likes:r.id.includes("playlist")?i=t.total_playlists:r.id.includes("download")&&(i=t.total_downloads);break;case"social":i=t.total_shares}i>=r.requirement&&(e.push(r),t.unlocked_achievements.add(r.id))}return e}(r);return await c(r),{newAchievements:u,leveledUp:d,newXp:n,userState:r}}function u(t=0){return d(10,e=>{e.total_tracks_played+=1,e.total_listening_minutes+=Math.round(t/60);let r=new Date().toDateString();if(e.last_listened_date!==r){let t=new Date(Date.now()-864e5).toDateString();e.last_listened_date===t?e.streak+=1:e.streak=1,e.last_listened_date=r,e.streak>e.longest_streak&&(e.longest_streak=e.streak)}})}function g(){return d(5,t=>{t.total_likes+=1})}function p(){return d(25,t=>{t.total_playlists+=1})}function y(){return d(15,t=>{t.total_downloads+=1})}let k=l;function m(t){for(let e=s.length-1;e>=0;e--)if(t>=s[e])return e+1;return 1}function f(t){return t>=s.length?2*s[s.length-1]:s[t]??s[0]}function h(t,e){let r=s[e-1]||0,i=f(e);return i===r?0:Math.min(Math.max((t-r)/(i-r)*100,0),100)}function w(t){let e=["Newbie","Listener","Fan","Enthusiast","Devotee","Connoisseur","Expert","Master","Legend","Virtuoso","Maestro","Prodigy","Savant","Luminary","Icon","Phenom","Oracle","Titan","Deity","Transcendent"];return e[Math.min(t-1,e.length-1)]||"Transcendent"}},79984:(t,e,r)=>{r.d(e,{Zp:()=>a});var i=r(95155);r(12115);var n=r(91337);function a({className:t,...e}){return(0,i.jsx)("div",{"data-slot":"card",className:(0,n.cn)("bg-card text-card-foreground flex flex-col gap-6 rounded-xl border py-6 shadow-sm",t),...e})}},91337:(t,e,r)=>{r.d(e,{cn:()=>a});var i=r(29722),n=r(622);function a(...t){return(0,n.QP)((0,i.$)(t))}}}]);