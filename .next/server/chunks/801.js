exports.id=801,exports.ids=[801],exports.modules={641:(a,b,c)=>{"use strict";c.d(b,{default:()=>f});var d=c(48249),e=c(67484);let f=()=>{let[a,b]=(0,e.useState)(1);return(0,d.jsx)("div",{className:"fixed inset-0 bg-black bg-opacity-50 z-50 flex items-center justify-center",children:(0,d.jsxs)("div",{className:"bg-gray-800 p-8 rounded-lg shadow-lg w-full max-w-md",children:[1===a&&(0,d.jsxs)("div",{children:[(0,d.jsx)("h2",{className:"text-2xl font-bold mb-4",children:"Welcome to Sean Streams!"}),(0,d.jsx)("p",{children:"Let's get you set up."})]}),2===a&&(0,d.jsxs)("div",{children:[(0,d.jsx)("h2",{className:"text-2xl font-bold mb-4",children:"Personalize Your Experience"}),(0,d.jsx)("p",{children:"Tell us what you like."})]}),3===a&&(0,d.jsxs)("div",{children:[(0,d.jsx)("h2",{className:"text-2xl font-bold mb-4",children:"All Set!"}),(0,d.jsx)("p",{children:"Enjoy your personalized music experience."})]}),(0,d.jsxs)("div",{className:"mt-8 flex justify-between",children:[a>1&&(0,d.jsx)("button",{onClick:()=>b(a-1),className:"px-4 py-2 bg-gray-600 rounded-md",children:"Previous"}),a<3&&(0,d.jsx)("button",{onClick:()=>b(a+1),className:"px-4 py-2 bg-green-600 rounded-md",children:"Next"}),3===a&&(0,d.jsx)("button",{onClick:()=>localStorage.setItem("onboardingComplete","true"),className:"px-4 py-2 bg-green-600 rounded-md",children:"Finish"})]})]})})}},1350:(a,b,c)=>{"use strict";c.d(b,{F:()=>f,T:()=>e});var d=c(67484);let e=(0,d.createContext)(void 0);function f(){let a=(0,d.useContext)(e);if(void 0===a)throw Error("usePlayer must be used within a PlayerProvider");return a}},5720:(a,b,c)=>{"use strict";c.d(b,{XB:()=>o,getPlaylistItems:()=>l,Pd:()=>k,K0:()=>i,eZ:()=>j});class d{get(a){let b=this.cache.get(a);return b?Date.now()-b.timestamp>b.ttl?(this.cache.delete(a),null):b.data:null}set(a,b,c=this.DEFAULT_TTL){this.cache.set(a,{data:b,timestamp:Date.now(),ttl:c})}clear(){this.cache.clear()}clearOldEntries(a=this.DEFAULT_TTL){let b=Date.now();for(let[c,d]of this.cache.entries())b-d.timestamp>a&&this.cache.delete(c)}constructor(){this.cache=new Map,this.DEFAULT_TTL=3e5}}let e=new d;function f(a,b){let c=new URLSearchParams(Object.entries(b).reduce((a,[b,c])=>(null!=c&&(a[b]=String(c)),a),{})).toString();return`${a}?${c}`}let g="AIzaSyCpbcqf4WZxq7UVJUZ-XVO7qTFpBeJE0kI",h="https://www.googleapis.com/youtube/v3";function i(a){if(!a||"string"!=typeof a)return!1;let b=a.trim();return/^[a-zA-Z0-9_-]{11}$/.test(b)}async function j(a,b){if(!g)return console.error("[v0] YouTube API key not configured"),{videos:[],playlists:[]};try{let c=f("search-youtube",{query:a});if(!b){let b=e.get(c);if(b)return console.log("[v0] Search cache hit:",a),b}let d=new URLSearchParams({part:"snippet",q:`${a} official audio`,type:"video,playlist",maxResults:"20",key:g});b&&d.append("pageToken",b);let j=await fetch(`${h}/search?${d.toString()}`);if(!j.ok)throw Error(`YouTube search failed: ${j.status}`);let k=await j.json(),l=k.items.filter(a=>"youtube#video"===a.id.kind),o=k.items.filter(a=>"youtube#playlist"===a.id.kind),p=l.map(a=>a.id.videoId).join(","),q=o.map(a=>({id:a.id.playlistId,title:a.snippet.title,description:a.snippet.description,thumbnail:a.snippet.thumbnails.high?.url||"",channelTitle:a.snippet.channelTitle})),r=[];if(p){let a=await fetch(`${h}/videos?part=contentDetails,snippet&id=${p}&key=${g}`);if(!a.ok)throw Error(`YouTube details failed: ${a.status}`);let b=(await a.json()).items.map(a=>{if(!i(a.id))return console.warn("[v0] Skipping video with invalid ID format:",a.id),null;let b=a.snippet.title,c=a.snippet.channelTitle,d=c;return b.includes(" - ")?d=b.split(" - ")[0].trim():b.includes(" | ")&&(d=b.split(" | ")[0].trim()),{id:a.id,title:m(b),artist:d,thumbnail:a.snippet.thumbnails.high?.url||"",duration:n(a.contentDetails.duration),channelTitle:c}});r.push(...b.filter(a=>null!==a))}let s={videos:r,playlists:q,nextPageToken:k.nextPageToken};return b||e.set(c,s),s}catch(a){return console.error("[v0] YouTube search error:",a),{videos:[],playlists:[]}}}async function k(){if(!g)return[];try{let a="trending-music",b=e.get(a);if(b)return console.log("[v0] Trending cache hit"),b;let c=await fetch(`${h}/videos?part=snippet,contentDetails&chart=mostPopular&regionCode=US&videoCategoryId=10&maxResults=20&key=${g}`);if(!c.ok)throw Error(`YouTube trending failed: ${c.status}`);let d=(await c.json()).items.map(a=>{let b=a.snippet.title,c=a.snippet.channelTitle,d=c;return b.includes(" - ")&&(d=b.split(" - ")[0].trim()),{id:a.id,title:m(b),artist:d,thumbnail:a.snippet.thumbnails.high?.url||"",duration:n(a.contentDetails.duration),channelTitle:c}});return e.set(a,d,36e5),d}catch(a){return console.error("[v0] YouTube trending error:",a),[]}}async function l(a,b=20){if(!g)return[];try{let c=f("playlist-items",{playlistId:a,maxResults:b}),d=e.get(c);if(d)return console.log("[v0] Playlist cache hit:",a),d;let j=await fetch(`${h}/playlistItems?part=snippet,contentDetails&playlistId=${a}&maxResults=${b}&key=${g}`);if(!j.ok)throw Error(`YouTube playlist failed: ${j.status}`);let k=(await j.json()).items.map(a=>a.contentDetails.videoId).join(",");if(!k)return[];let l=await fetch(`${h}/videos?part=contentDetails,snippet&id=${k}&key=${g}`);if(!l.ok)throw Error(`YouTube video details failed: ${l.status}`);return(await l.json()).items.map(a=>{if(!i(a.id))return console.warn("[v0] Skipping playlist item with invalid ID format:",a.id),null;let b=a.snippet.title,c=a.snippet.channelTitle,d=c;return b.includes(" - ")&&(d=b.split(" - ")[0].trim()),{id:a.id,title:m(b),artist:d,thumbnail:a.snippet.thumbnails.high?.url||"",duration:n(a.contentDetails.duration),channelTitle:c}}).filter(a=>null!==a)}catch(a){return console.error("[v0] YouTube playlist error:",a),[]}}function m(a){return a.replace(/\(Official\s*(Music\s*)?Video\)/gi,"").replace(/\[Official\s*(Music\s*)?Video\]/gi,"").replace(/\(Official\s*Audio\)/gi,"").replace(/\[Official\s*Audio\]/gi,"").replace(/\(Lyrics?\)/gi,"").replace(/\[Lyrics?\]/gi,"").replace(/\(Audio\)/gi,"").replace(/\[Audio\]/gi,"").replace(/\|.*$/g,"").replace(/\s+-\s+[^-]+$/,"").trim()}function n(a){let b=a.match(/PT(?:(\d+)H)?(?:(\d+)M)?(?:(\d+)S)?/);if(!b)return"0:00";let c=parseInt(b[1]||"0"),d=parseInt(b[2]||"0"),e=parseInt(b[3]||"0");return c>0?`${c}:${d.toString().padStart(2,"0")}:${e.toString().padStart(2,"0")}`:`${d}:${e.toString().padStart(2,"0")}`}function o(a){let b=a.split(":").map(Number);return 3===b.length?3600*b[0]+60*b[1]+b[2]:60*b[0]+(b[1]||0)}},5828:(a,b,c)=>{"use strict";c.d(b,{NowPlayingBar:()=>h});var d=c(48249),e=c(90314),f=c(67484);let g=(0,e.default)(async()=>{},{loadableGenerated:{modules:["components/music/now-playing-bar.tsx -> ./now-playing-bar-client"]},ssr:!1}),h=(0,f.memo)(function({className:a,mobile:b}){return(0,d.jsx)(g,{className:a,mobile:b})})},8179:(a,b,c)=>{"use strict";c.d(b,{Sidebar:()=>A});var d=c(48249),e=c(2116),f=c.n(e),g=c(19099),h=c(90110),i=c(10316),j=c(68762),k=c(12329),l=c(12853),m=c(24520),n=c(4514),o=c(77650),p=c(10173),q=c(98631),r=c(33191),s=c(26284),t=c(67484),u=c(42114);function v({className:a,children:b,...c}){return(0,d.jsxs)(u.bL,{"data-slot":"scroll-area",className:(0,r.cn)("relative",a),...c,children:[(0,d.jsx)(u.LM,{"data-slot":"scroll-area-viewport",className:"focus-visible:ring-ring/50 size-full rounded-[inherit] transition-[color,box-shadow] outline-none focus-visible:ring-[3px] focus-visible:outline-1",children:b}),(0,d.jsx)(w,{}),(0,d.jsx)(u.OK,{})]})}function w({className:a,orientation:b="vertical",...c}){return(0,d.jsx)(u.VM,{"data-slot":"scroll-area-scrollbar",orientation:b,className:(0,r.cn)("flex touch-none p-px transition-colors select-none","vertical"===b&&"h-full w-2.5 border-l border-l-transparent","horizontal"===b&&"h-2.5 flex-col border-t border-t-transparent",a),...c,children:(0,d.jsx)(u.lr,{"data-slot":"scroll-area-thumb",className:"bg-border relative flex-1 rounded-full"})})}let x=(0,c(90314).default)(async()=>{},{loadableGenerated:{modules:["components/gamification/gamification-widget.tsx -> ./gamification-widget-client"]},ssr:!1});function y(){return(0,d.jsx)(x,{})}let z=[{href:"/",icon:h.A,label:"Home"},{href:"/search",icon:i.A,label:"Search"},{href:"/artists",icon:j.A,label:"Artists"},{href:"/stats",icon:k.A,label:"Stats"}],A=(0,t.memo)(function({className:a}){let b=(0,g.usePathname)();return(0,d.jsxs)("div",{className:(0,r.cn)("w-64 flex flex-col gap-2 p-2 bg-background",a),children:[(0,d.jsx)("div",{className:"bg-card rounded-lg p-3",children:(0,d.jsx)("nav",{className:"space-y-1",children:z.map(a=>{let c=b===a.href||"/"!==a.href&&b.startsWith(a.href),e=a.icon;return(0,d.jsxs)(f(),{href:a.href,className:(0,r.cn)("flex items-center gap-4 px-3 py-3 rounded-md font-semibold transition-colors",c?"text-foreground":"text-muted-foreground hover:text-foreground"),children:[(0,d.jsx)(e,{className:"w-6 h-6"}),(0,d.jsx)("span",{children:a.label})]},a.href)})})}),(0,d.jsx)(y,{}),(0,d.jsxs)("div",{className:"flex-1 bg-card rounded-lg flex flex-col min-h-0",children:[(0,d.jsxs)("div",{className:"flex items-center justify-between px-4 py-3",children:[(0,d.jsxs)(f(),{href:"/library",className:(0,r.cn)("flex items-center gap-3 font-semibold transition-colors",b.startsWith("/library")?"text-foreground":"text-muted-foreground hover:text-foreground"),children:[(0,d.jsx)(l.A,{className:"w-6 h-6"}),(0,d.jsx)("span",{children:"Your Library"})]}),(0,d.jsx)(s.$,{variant:"ghost",size:"icon",className:"w-8 h-8",children:(0,d.jsx)(m.A,{className:"w-4 h-4"})})]}),(0,d.jsx)(v,{className:"flex-1 px-2",children:(0,d.jsxs)("div",{className:"space-y-1 pb-4",children:[(0,d.jsxs)(f(),{href:"/playlists",className:(0,r.cn)("flex items-center gap-3 p-2 rounded-md hover:bg-secondary/50 transition-colors","/playlists"===b?"bg-secondary/50":""),children:[(0,d.jsx)("div",{className:"w-12 h-12 rounded-md bg-linear-to-br from-orange-600 to-red-500 flex items-center justify-center shrink-0",children:(0,d.jsx)(n.A,{className:"w-5 h-5 text-foreground"})}),(0,d.jsxs)("div",{className:"flex-1 min-w-0",children:[(0,d.jsx)("p",{className:"font-medium text-foreground truncate",children:"Playlists"}),(0,d.jsx)("p",{className:"text-sm text-muted-foreground",children:"Your playlists"})]})]}),(0,d.jsxs)(f(),{href:"/library?tab=liked",className:"flex items-center gap-3 p-2 rounded-md hover:bg-secondary/50 transition-colors group",children:[(0,d.jsx)("div",{className:"w-12 h-12 rounded-md bg-linear-to-br from-purple-700 to-blue-300 flex items-center justify-center shrink-0",children:(0,d.jsx)(o.A,{className:"w-5 h-5 text-foreground fill-current"})}),(0,d.jsxs)("div",{className:"flex-1 min-w-0",children:[(0,d.jsx)("p",{className:"font-medium text-foreground truncate",children:"Liked Songs"}),(0,d.jsx)("p",{className:"text-sm text-muted-foreground",children:"Playlist"})]})]}),(0,d.jsxs)(f(),{href:"/library?tab=recent",className:"flex items-center gap-3 p-2 rounded-md hover:bg-secondary/50 transition-colors group",children:[(0,d.jsx)("div",{className:"w-12 h-12 rounded-md bg-linear-to-br from-green-700 to-green-400 flex items-center justify-center shrink-0",children:(0,d.jsx)(p.A,{className:"w-5 h-5 text-foreground"})}),(0,d.jsxs)("div",{className:"flex-1 min-w-0",children:[(0,d.jsx)("p",{className:"font-medium text-foreground truncate",children:"Recently Played"}),(0,d.jsx)("p",{className:"text-sm text-muted-foreground",children:"Playlist"})]})]})]})})]}),(0,d.jsxs)(f(),{href:"/profile",className:(0,r.cn)("flex items-center gap-3 p-3 rounded-lg bg-card hover:bg-card/80 transition-colors","/profile"===b?"ring-2 ring-primary":""),children:[(0,d.jsx)("div",{className:"w-10 h-10 rounded-full bg-linear-to-br from-blue-500 to-purple-500 flex items-center justify-center shrink-0",children:(0,d.jsx)(q.A,{className:"w-5 h-5 text-white"})}),(0,d.jsx)("span",{className:"text-sm font-medium truncate",children:"Profile"})]})]})})},15212:(a,b,c)=>{"use strict";c.d(b,{Providers:()=>s});var d=c(48249),e=c(67484),f=c(5720);let g=null;async function h(){return g||new Promise((a,b)=>{let c=indexedDB.open("pulse-music-db",2);c.onerror=()=>b(c.error),c.onsuccess=()=>{a(g=c.result)},c.onupgradeneeded=a=>{let b=a.target.result;if(!b.objectStoreNames.contains("tracks")){let a=b.createObjectStore("tracks",{keyPath:"id"});a.createIndex("savedAt","savedAt",{unique:!1}),a.createIndex("playCount","playCount",{unique:!1})}if(b.objectStoreNames.contains("playlists")||b.createObjectStore("playlists",{keyPath:"id"}).createIndex("name","name",{unique:!1}),b.objectStoreNames.contains("recentlyPlayed")||b.createObjectStore("recentlyPlayed",{keyPath:"id"}).createIndex("playedAt","playedAt",{unique:!1}),b.objectStoreNames.contains("likedTracks")||b.createObjectStore("likedTracks",{keyPath:"id"}),!b.objectStoreNames.contains("downloads")){let a=b.createObjectStore("downloads",{keyPath:"id"});a.createIndex("downloadedAt","downloadedAt",{unique:!1}),a.createIndex("downloadStatus","downloadStatus",{unique:!1})}b.objectStoreNames.contains("albums")||b.createObjectStore("albums",{keyPath:"id"}).createIndex("savedAt","savedAt",{unique:!1})}})}async function i(a){let b=(await h()).transaction("recentlyPlayed","readwrite").objectStore("recentlyPlayed");b.put({...a,playedAt:Date.now()});let c=b.count();c.onsuccess=()=>{if(c.result>50){let a=b.index("playedAt").openCursor(),d=c.result-50;a.onsuccess=a=>{let b=a.target.result;b&&d>0&&(b.delete(),d--,b.continue())}}}}var j=c(91929),k=c(1350),l=c(58848),m=c(52078),n=c(46674),o=c(33191);function p({title:a,description:b,onClose:c}){let[f,g]=(0,e.useState)(!1);return(0,d.jsx)("div",{className:(0,o.cn)("fixed top-4 left-1/2 -translate-x-1/2 z-[200] transition-all duration-300",f?"opacity-100 translate-y-0":"opacity-0 -translate-y-4"),children:(0,d.jsxs)("div",{className:"flex items-center gap-3 px-5 py-3 rounded-xl bg-card border border-primary/30 shadow-2xl shadow-primary/10 backdrop-blur-xl max-w-sm",children:[(0,d.jsx)("div",{className:"w-10 h-10 rounded-lg bg-primary/20 flex items-center justify-center shrink-0 animate-achievement",children:(0,d.jsx)(m.A,{className:"w-5 h-5 text-primary"})}),(0,d.jsxs)("div",{className:"flex-1 min-w-0",children:[(0,d.jsx)("p",{className:"text-sm font-bold text-foreground",children:"Achievement Unlocked!"}),(0,d.jsx)("p",{className:"text-xs text-primary font-medium",children:a}),(0,d.jsx)("p",{className:"text-xs text-muted-foreground truncate",children:b})]}),(0,d.jsx)("button",{onClick:c,className:"shrink-0 text-muted-foreground hover:text-foreground",children:(0,d.jsx)(n.A,{className:"w-4 h-4"})})]})})}function q({children:a}){let[b,c]=(0,e.useState)(null),[g,h]=(0,e.useState)(!1),[m,n]=(0,e.useState)(0),[o,q]=(0,e.useState)(0),[r,s]=(0,e.useState)(80),[t,u]=(0,e.useState)([]),[v,w]=(0,e.useState)(-1),[x,y]=(0,e.useState)(!1),[z,A]=(0,e.useState)(!1),[B,C]=(0,e.useState)([]),D=(0,e.useRef)(null),E=(0,e.useRef)(null),F=(0,e.useRef)(null),G=(0,e.useRef)(null),H=(0,e.useRef)(!1),{toast:I}=(0,l.d)();(0,e.useCallback)(a=>{let b=a.data;b===window.YT.PlayerState.PLAYING?(h(!0),y(!1),P(),navigator.mediaSession&&(navigator.mediaSession.playbackState="playing")):b===window.YT.PlayerState.PAUSED?(h(!1),Q(),navigator.mediaSession&&(navigator.mediaSession.playbackState="paused")):b===window.YT.PlayerState.ENDED?M():b===window.YT.PlayerState.BUFFERING&&y(!0)},[P,Q,M]);let J=(0,e.useCallback)(()=>{F.current&&(clearInterval(F.current),F.current=null)},[]);(0,e.useCallback)(()=>{J(),F.current=setInterval(()=>{document.hidden&&H.current&&D.current&&D.current.getPlayerState()!==window.YT.PlayerState.PLAYING&&D.current.playVideo()},1e3)},[J]);let K=(0,e.useCallback)(async(a,b)=>{if(!a||!a.id)return;c(a);let d=b&&b.length>0?b:[a];u(d),w(d.findIndex(b=>b.id===a.id)),y(!0);let e=async()=>{if(D.current&&"function"==typeof D.current.loadVideoById){D.current.loadVideoById(a.id),D.current.playVideo(),G.current?.play().catch(a=>console.warn("[Player] Silent audio failed to play:",a)),i(a),(0,j.Ze)(a);let b=await fetch("/api/gamification/play",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({userId:"user-id",duration:(0,f.XB)(a.duration)})}),{newAchievements:c,leveledUp:d}=await b.json();c.length>0&&C(a=>[...a,...c]),d&&I({title:"Level Up!",description:"You've reached a new level!"})}else setTimeout(e,100)};e()},[I]),L=(0,e.useCallback)(()=>{D.current&&b&&(g?(D.current.pauseVideo(),G.current?.pause()):(D.current.playVideo(),G.current?.play().catch(a=>console.warn("[Player] Silent audio failed to play:",a))))},[b,g]),M=(0,e.useCallback)(()=>{if(0===t.length)return;let a=(v+1)%t.length;K(t[a],t)},[t,v,K]),N=(0,e.useCallback)(()=>{if(0!==t.length)if(m>3)O(0);else{let a=(v-1+t.length)%t.length;K(t[a],t)}},[t,v,m,K,O]),O=(0,e.useCallback)(a=>{D.current&&(D.current.seekTo(a,!0),n(a))},[]),P=(0,e.useCallback)(()=>{Q(),E.current=setInterval(()=>{let a=D.current?.getCurrentTime()||0,b=D.current?.getDuration()||0;n(a),q(b),navigator.mediaSession?.setPositionState&&navigator.mediaSession.setPositionState({duration:b,playbackRate:1,position:a})},250)},[Q]),Q=(0,e.useCallback)(()=>{E.current&&(clearInterval(E.current),E.current=null)},[]),R=(0,e.useCallback)(a=>{s(a),D.current?.setVolume(a)},[]);return(0,d.jsxs)(k.T.Provider,{value:{currentSong:b,isPlaying:g,currentTime:m,duration:o,volume:r,queue:t,queueIndex:v,isLoading:x,playSong:K,togglePlayPause:L,nextTrack:M,previousTrack:N,seek:O,setVolume:R},children:[a,B.map(a=>(0,d.jsx)(p,{title:a.title,description:a.description,onClose:()=>C(b=>b.filter(b=>b.id!==a.id))},a.id))]})}var r=c(17880);function s({children:a}){return(0,d.jsx)(q,{children:(0,d.jsx)(r.ToastProvider,{children:a})})}},15622:(a,b,c)=>{"use strict";c.d(b,{BottomNav:()=>d});let d=(0,c(77943).registerClientReference)(function(){throw Error("Attempted to call BottomNav() from the server but BottomNav is on the client. It's not possible to invoke a client function from the server, it can only be rendered as a Component or passed to props of a Client Component.")},"/home/user/feature/components/music/bottom-nav.tsx","BottomNav")},20167:(a,b,c)=>{"use strict";c.d(b,{Sidebar:()=>d});let d=(0,c(77943).registerClientReference)(function(){throw Error("Attempted to call Sidebar() from the server but Sidebar is on the client. It's not possible to invoke a client function from the server, it can only be rendered as a Component or passed to props of a Client Component.")},"/home/user/feature/components/music/sidebar.tsx","Sidebar")},26284:(a,b,c)=>{"use strict";c.d(b,{$:()=>i});var d=c(48249);c(67484);var e=c(43980),f=c(21654),g=c(33191);let h=(0,f.F)("inline-flex items-center justify-center gap-2 whitespace-nowrap rounded-md text-sm font-medium transition-all disabled:pointer-events-none disabled:opacity-50 [&_svg]:pointer-events-none [&_svg:not([class*='size-'])]:size-4 shrink-0 [&_svg]:shrink-0 outline-none focus-visible:border-ring focus-visible:ring-ring/50 focus-visible:ring-[3px] aria-invalid:ring-destructive/20 dark:aria-invalid:ring-destructive/40 aria-invalid:border-destructive",{variants:{variant:{default:"bg-primary text-primary-foreground hover:bg-primary/90",destructive:"bg-destructive text-white hover:bg-destructive/90 focus-visible:ring-destructive/20 dark:focus-visible:ring-destructive/40 dark:bg-destructive/60",outline:"border bg-background shadow-xs hover:bg-accent hover:text-accent-foreground dark:bg-input/30 dark:border-input dark:hover:bg-input/50",secondary:"bg-secondary text-secondary-foreground hover:bg-secondary/80",ghost:"hover:bg-accent hover:text-accent-foreground dark:hover:bg-accent/50",link:"text-primary underline-offset-4 hover:underline"},size:{default:"h-9 px-4 py-2 has-[>svg]:px-3",sm:"h-8 rounded-md gap-1.5 px-3 has-[>svg]:px-2.5",lg:"h-10 rounded-md px-6 has-[>svg]:px-4",icon:"size-9","icon-sm":"size-8","icon-lg":"size-10"}},defaultVariants:{variant:"default",size:"default"}});function i({className:a,variant:b,size:c,asChild:f=!1,...i}){let j=f?e.DX:"button";return(0,d.jsx)(j,{"data-slot":"button",className:(0,g.cn)(h({variant:b,size:c,className:a})),...i})}},33191:(a,b,c)=>{"use strict";c.d(b,{cn:()=>f});var d=c(99314),e=c(96862);function f(...a){return(0,e.QP)((0,d.$)(a))}},36336:(a,b,c)=>{"use strict";c.d(b,{BottomNav:()=>f});var d=c(48249);let e=(0,c(90314).default)(async()=>{},{loadableGenerated:{modules:["components/music/bottom-nav.tsx -> ./bottom-nav-client"]},ssr:!1});function f(){return(0,d.jsx)(e,{})}},44593:(a,b,c)=>{"use strict";c.r(b),c.d(b,{default:()=>n});var d=c(5735),e=c(69298),f=c(20167),g=c(15622),h=c(74870),i=c(63059),j=c.n(i),k=c(16290),l=c(77175),m=c(62743);function n({children:a}){return(0,d.jsxs)(e.Providers,{children:[(0,d.jsx)(l.default,{}),(0,d.jsxs)("div",{className:"h-screen flex flex-col bg-background overflow-hidden",children:[(0,d.jsxs)("div",{className:"flex flex-1 overflow-hidden",children:[(0,d.jsx)(f.Sidebar,{className:"hidden md:flex"}),(0,d.jsx)("main",{className:"flex-1 overflow-y-auto pb-32 sm:pb-24 relative",children:(0,d.jsxs)("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 md:px-8 py-6 sm:py-8",children:[(0,d.jsxs)("div",{className:"flex justify-between items-center mb-4",children:[(0,d.jsx)("div",{})," ",(0,d.jsxs)("div",{className:"flex items-center gap-4",children:[(0,d.jsx)(m.ThemeToggle,{}),(0,d.jsx)("div",{className:"md:hidden",children:(0,d.jsx)(j(),{href:"/profile",className:"p-2 hover:bg-secondary rounded-lg transition-colors",children:(0,d.jsx)(k.A,{className:"w-5 h-5 text-foreground"})})})]})]}),a]})})]}),(0,d.jsx)(h.NowPlayingBar,{className:"hidden md:flex"}),(0,d.jsxs)("div",{className:"md:hidden",children:[(0,d.jsx)(h.NowPlayingBar,{mobile:!0}),(0,d.jsx)(g.BottomNav,{})]})]})]})}},58848:(a,b,c)=>{"use strict";c.d(b,{d:()=>g});var d=c(67484),e=c(17880);let f=0;function g(){let a=d.useContext(e.$o);if(!a)throw Error("useToast must be used within a ToastProvider");let{state:b,dispatch:c}=a,g=d.useCallback(({...a})=>{let b=(f=(f+1)%Number.MAX_SAFE_INTEGER).toString(),d=()=>c({type:"DISMISS_TOAST",toastId:b});return c({type:"ADD_TOAST",toast:{...a,id:b,open:!0,onOpenChange:a=>{a||d()}}}),{id:b,dismiss:d}},[c]);return{...b,toast:g,dismiss:a=>c({type:"DISMISS_TOAST",toastId:a})}}},59409:(a,b,c)=>{Promise.resolve().then(c.bind(c,15212)),Promise.resolve().then(c.bind(c,36336)),Promise.resolve().then(c.bind(c,5828)),Promise.resolve().then(c.bind(c,641)),Promise.resolve().then(c.bind(c,8179)),Promise.resolve().then(c.bind(c,76237)),Promise.resolve().then(c.t.bind(c,2116,23))},62743:(a,b,c)=>{"use strict";c.d(b,{ThemeToggle:()=>d});let d=(0,c(77943).registerClientReference)(function(){throw Error("Attempted to call ThemeToggle() from the server but ThemeToggle is on the client. It's not possible to invoke a client function from the server, it can only be rendered as a Component or passed to props of a Client Component.")},"/home/user/feature/components/music/theme-toggle.tsx","ThemeToggle")},69137:(a,b,c)=>{Promise.resolve().then(c.bind(c,69298)),Promise.resolve().then(c.bind(c,15622)),Promise.resolve().then(c.bind(c,74870)),Promise.resolve().then(c.bind(c,77175)),Promise.resolve().then(c.bind(c,20167)),Promise.resolve().then(c.bind(c,62743)),Promise.resolve().then(c.t.bind(c,23318,23))},69298:(a,b,c)=>{"use strict";c.d(b,{Providers:()=>d});let d=(0,c(77943).registerClientReference)(function(){throw Error("Attempted to call Providers() from the server but Providers is on the client. It's not possible to invoke a client function from the server, it can only be rendered as a Component or passed to props of a Client Component.")},"/home/user/feature/app/providers.tsx","Providers")},74870:(a,b,c)=>{"use strict";c.d(b,{NowPlayingBar:()=>d});let d=(0,c(77943).registerClientReference)(function(){throw Error("Attempted to call NowPlayingBar() from the server but NowPlayingBar is on the client. It's not possible to invoke a client function from the server, it can only be rendered as a Component or passed to props of a Client Component.")},"/home/user/feature/components/music/now-playing-bar.tsx","NowPlayingBar")},76237:(a,b,c)=>{"use strict";c.d(b,{ThemeToggle:()=>o});var d=c(48249);c(67484);var e=c(73908),f=c(84121),g=c(8696),h=c(26284),i=c(2276),j=c(33191);function k({...a}){return(0,d.jsx)(i.bL,{"data-slot":"dropdown-menu",...a})}function l({...a}){return(0,d.jsx)(i.l9,{"data-slot":"dropdown-menu-trigger",...a})}function m({className:a,sideOffset:b=4,...c}){return(0,d.jsx)(i.ZL,{children:(0,d.jsx)(i.UC,{"data-slot":"dropdown-menu-content",sideOffset:b,className:(0,j.cn)("bg-popover text-popover-foreground data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[side=bottom]:slide-in-from-top-2 data-[side=left]:slide-in-from-right-2 data-[side=right]:slide-in-from-left-2 data-[side=top]:slide-in-from-bottom-2 z-50 max-h-(--radix-dropdown-menu-content-available-height) min-w-[8rem] origin-(--radix-dropdown-menu-content-transform-origin) overflow-x-hidden overflow-y-auto rounded-md border p-1 shadow-md",a),...c})})}function n({className:a,inset:b,variant:c="default",...e}){return(0,d.jsx)(i.q7,{"data-slot":"dropdown-menu-item","data-inset":b,"data-variant":c,className:(0,j.cn)("focus:bg-accent focus:text-accent-foreground data-[variant=destructive]:text-destructive data-[variant=destructive]:focus:bg-destructive/10 dark:data-[variant=destructive]:focus:bg-destructive/20 data-[variant=destructive]:focus:text-destructive data-[variant=destructive]:*:[svg]:!text-destructive [&_svg:not([class*='text-'])]:text-muted-foreground relative flex cursor-default items-center gap-2 rounded-sm px-2 py-1.5 text-sm outline-hidden select-none data-[disabled]:pointer-events-none data-[disabled]:opacity-50 data-[inset]:pl-8 [&_svg]:pointer-events-none [&_svg]:shrink-0 [&_svg:not([class*='size-'])]:size-4",a),...e})}function o(){let{setTheme:a}=(0,g.D)();return(0,d.jsxs)(k,{children:[(0,d.jsx)(l,{asChild:!0,children:(0,d.jsxs)(h.$,{variant:"ghost",size:"icon",children:[(0,d.jsx)(e.A,{className:"h-[1.2rem] w-[1.2rem] rotate-0 scale-100 transition-all dark:-rotate-90 dark:scale-0"}),(0,d.jsx)(f.A,{className:"absolute h-[1.2rem] w-[1.2rem] rotate-90 scale-0 transition-all dark:rotate-0 dark:scale-100"}),(0,d.jsx)("span",{className:"sr-only",children:"Toggle theme"})]})}),(0,d.jsxs)(m,{align:"end",children:[(0,d.jsx)(n,{onClick:()=>a("light"),children:"Light"}),(0,d.jsx)(n,{onClick:()=>a("dark"),children:"Dark"}),(0,d.jsx)(n,{onClick:()=>a("system"),children:"System"})]})]})}},77175:(a,b,c)=>{"use strict";c.d(b,{default:()=>d});let d=(0,c(77943).registerClientReference)(function(){throw Error("Attempted to call the default export of \"/home/user/feature/components/music/onboarding-flow.tsx\" from the server, but it's on the client. It's not possible to invoke a client function from the server, it can only be rendered as a Component or passed to props of a Client Component.")},"/home/user/feature/components/music/onboarding-flow.tsx","default")},91929:(a,b,c)=>{"use strict";c.d(b,{$I:()=>i,Gp:()=>h,WD:()=>j,Yw:()=>g,Ze:()=>f});let d=null;async function e(){return d||new Promise((a,b)=>{let c=indexedDB.open("pulse-music-stats",1);c.onerror=()=>b(c.error),c.onsuccess=()=>{a(d=c.result)},c.onupgradeneeded=a=>{let b=a.target.result;if(!b.objectStoreNames.contains("trackStats")){let a=b.createObjectStore("trackStats",{keyPath:"trackId"});a.createIndex("playCount","playCount",{unique:!1}),a.createIndex("lastPlayed","lastPlayed",{unique:!1})}if(!b.objectStoreNames.contains("listeningHistory")){let a=b.createObjectStore("listeningHistory",{keyPath:"id",autoIncrement:!0});a.createIndex("timestamp","timestamp",{unique:!1}),a.createIndex("date","date",{unique:!1})}}})}async function f(a){try{let b=(await e()).transaction(["trackStats","listeningHistory"],"readwrite"),c=b.objectStore("trackStats"),d=await new Promise(b=>{let d=c.get(a.id);d.onsuccess=()=>b(d.result)}),f=Date.now(),g="string"==typeof a.duration?parseInt(a.duration,10)||0:a.duration||0,h={trackId:a.id,title:a.title,artist:a.channelTitle,playCount:(d?.playCount||0)+1,lastPlayed:f,totalListeningTime:(d?.totalListeningTime||0)+g,likedAt:d?.likedAt,addedToPlaylistCount:d?.addedToPlaylistCount||0};await new Promise((a,b)=>{let d=c.put(h);d.onsuccess=()=>a(),d.onerror=()=>b(d.error)});let i=b.objectStore("listeningHistory");await new Promise((b,c)=>{let d=i.add({trackId:a.id,title:a.title,artist:a.channelTitle,duration:a.duration,timestamp:f,date:new Date(f).toISOString().split("T")[0]});d.onsuccess=()=>b(),d.onerror=()=>c(d.error)})}catch(a){console.error("[Stats] Error recording play:",a)}}async function g(a=10){try{let b=(await e()).transaction("trackStats","readonly").objectStore("trackStats").index("playCount");return new Promise((c,d)=>{let e=b.openCursor(null,"prev"),f=[];e.onsuccess=b=>{let d=b.target.result;d&&f.length<a?(f.push(d.value),d.continue()):c(f)},e.onerror=()=>d(e.error)})}catch(a){return console.error("[Stats] Error getting top tracks:",a),[]}}async function h(a=10){try{let b=await g(100),c=new Map;return b.forEach(a=>{let b=c.get(a.artist)||{artist:a.artist,playCount:0,totalListeningTime:0,topTracks:[]};b.playCount+=a.playCount,b.totalListeningTime+=a.totalListeningTime,b.topTracks.push(a),c.set(a.artist,b)}),Array.from(c.values()).sort((a,b)=>b.playCount-a.playCount).slice(0,a).map(a=>({...a,topTracks:a.topTracks.slice(0,3)}))}catch(a){return console.error("[Stats] Error getting top artists:",a),[]}}async function i(){try{let a=(await e()).transaction(["trackStats","listeningHistory"],"readonly"),b=await new Promise((b,c)=>{let d=a.objectStore("trackStats"),e=[],f=d.openCursor();f.onsuccess=a=>{let c=a.target.result;c?(e.push(c.value),c.continue()):b(e)},f.onerror=()=>c(f.error)}),c=Date.now(),d=c-6048e5,f=c-2592e6,g=b.filter(a=>a.lastPlayed>=d),i=b.filter(a=>a.lastPlayed>=f),j=b.sort((a,b)=>b.playCount-a.playCount).slice(0,10),k=await h(5);return{totalTracks:b.length,totalArtists:new Set(b.map(a=>a.artist)).size,totalListeningTime:b.reduce((a,b)=>a+b.totalListeningTime,0),averageTrackLength:b.length>0?b.reduce((a,b)=>a+b.totalListeningTime,0)/b.length:0,topTracks:j,topArtists:k,likedTracksCount:b.filter(a=>a.likedAt).length,playlistsCount:0,lastListenedAt:Math.max(...b.map(a=>a.lastPlayed)),thisWeekListeningTime:g.reduce((a,b)=>a+b.totalListeningTime,0),thisMonthListeningTime:i.reduce((a,b)=>a+b.totalListeningTime,0)}}catch(a){return console.error("[Stats] Error getting listening stats:",a),{totalTracks:0,totalArtists:0,totalListeningTime:0,averageTrackLength:0,topTracks:[],topArtists:[],likedTracksCount:0,playlistsCount:0,lastListenedAt:0,thisWeekListeningTime:0,thisMonthListeningTime:0}}}function j(a){let b=Math.floor(a/3600),c=Math.floor(a%3600/60);return 0===b?`${c}m`:`${b}h ${c}m`}}};