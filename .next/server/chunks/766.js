exports.id=766,exports.ids=[766],exports.modules={387:(a,b,c)=>{"use strict";c.d(b,{recordLike:()=>f,recordPlay:()=>e,recordPlaylistCreate:()=>g});var d=c(77943);let e=(0,d.registerClientReference)(function(){throw Error("Attempted to call recordPlay() from the server but recordPlay is on the client. It's not possible to invoke a client function from the server, it can only be rendered as a Component or passed to props of a Client Component.")},"/home/user/feature/lib/gamification.ts","recordPlay"),f=(0,d.registerClientReference)(function(){throw Error("Attempted to call recordLike() from the server but recordLike is on the client. It's not possible to invoke a client function from the server, it can only be rendered as a Component or passed to props of a Client Component.")},"/home/user/feature/lib/gamification.ts","recordLike"),g=(0,d.registerClientReference)(function(){throw Error("Attempted to call recordPlaylistCreate() from the server but recordPlaylistCreate is on the client. It's not possible to invoke a client function from the server, it can only be rendered as a Component or passed to props of a Client Component.")},"/home/user/feature/lib/gamification.ts","recordPlaylistCreate");(0,d.registerClientReference)(function(){throw Error("Attempted to call recordDownload() from the server but recordDownload is on the client. It's not possible to invoke a client function from the server, it can only be rendered as a Component or passed to props of a Client Component.")},"/home/user/feature/lib/gamification.ts","recordDownload"),(0,d.registerClientReference)(function(){throw Error("Attempted to call recordShare() from the server but recordShare is on the client. It's not possible to invoke a client function from the server, it can only be rendered as a Component or passed to props of a Client Component.")},"/home/user/feature/lib/gamification.ts","recordShare"),(0,d.registerClientReference)(function(){throw Error("Attempted to call getGamification() from the server but getGamification is on the client. It's not possible to invoke a client function from the server, it can only be rendered as a Component or passed to props of a Client Component.")},"/home/user/feature/lib/gamification.ts","getGamification"),(0,d.registerClientReference)(function(){throw Error("Attempted to call getUnlockedAchievements() from the server but getUnlockedAchievements is on the client. It's not possible to invoke a client function from the server, it can only be rendered as a Component or passed to props of a Client Component.")},"/home/user/feature/lib/gamification.ts","getUnlockedAchievements"),(0,d.registerClientReference)(function(){throw Error("Attempted to call getLevelFromXP() from the server but getLevelFromXP is on the client. It's not possible to invoke a client function from the server, it can only be rendered as a Component or passed to props of a Client Component.")},"/home/user/feature/lib/gamification.ts","getLevelFromXP"),(0,d.registerClientReference)(function(){throw Error("Attempted to call getXPForNextLevel() from the server but getXPForNextLevel is on the client. It's not possible to invoke a client function from the server, it can only be rendered as a Component or passed to props of a Client Component.")},"/home/user/feature/lib/gamification.ts","getXPForNextLevel"),(0,d.registerClientReference)(function(){throw Error("Attempted to call getXPProgress() from the server but getXPProgress is on the client. It's not possible to invoke a client function from the server, it can only be rendered as a Component or passed to props of a Client Component.")},"/home/user/feature/lib/gamification.ts","getXPProgress"),(0,d.registerClientReference)(function(){throw Error("Attempted to call getAchievementIcon() from the server but getAchievementIcon is on the client. It's not possible to invoke a client function from the server, it can only be rendered as a Component or passed to props of a Client Component.")},"/home/user/feature/lib/gamification.ts","getAchievementIcon"),(0,d.registerClientReference)(function(){throw Error("Attempted to call formatLevel() from the server but formatLevel is on the client. It's not possible to invoke a client function from the server, it can only be rendered as a Component or passed to props of a Client Component.")},"/home/user/feature/lib/gamification.ts","formatLevel")},24610:(a,b,c)=>{Promise.resolve().then(c.bind(c,387))},59114:(a,b,c)=>{Promise.resolve().then(c.bind(c,82197))},77943:(a,b,c)=>{"use strict";a.exports=c(7553).vendored["react-rsc"].ReactServerDOMWebpackServer},79688:(a,b,c)=>{"use strict";c.d(b,{HN:()=>h,CK:()=>g,aO:()=>i});let d=(0,c(49980).createBrowserClient)("https://nzeqnvmepoykadilajud.supabase.co","eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJzdXBhYmFzZSIsInJlZiI6Im56ZXFudm1lcG95a2FkaWxhanVkIiwicm9sZSI6ImFub24iLCJpYXQiOjE3Njg5OTMzMDAsImV4cCI6MjA4NDU2OTMwMH0.igLBLX9XCMVkAthRm4T4pHiNU4iF9c5RoI2JGYHsPrI");var e=c(387);async function f(a){let{data:b,error:c}=await d.from("user_gamification").select("*").eq("user_id",a).single();if(c&&"PGRST116"===c.code){let{data:c,error:e}=await d.from("user_gamification").insert({user_id:a}).single();if(e)throw e;b=c}else if(c)throw c;return b}async function g(a,b){let c=await f(a),g=new Date().toISOString().split("T")[0],h=c.streak,i=c.longest_streak;if(c.last_listened_date){let a=new Date(c.last_listened_date),b=new Date;b.setDate(b.getDate()-1),a.toISOString().split("T")[0]===b.toISOString().split("T")[0]?h++:a.toISOString().split("T")[0]!==g&&(h=1)}else h=1;h>i&&(i=h);let{newAchievements:j,leveledUp:k,newXp:l}=(0,e.recordPlay)(b,c),{data:m,error:n}=await d.from("user_gamification").update({xp:l,level:k?c.level+1:c.level,streak:h,longest_streak:i,last_listened_date:g,total_tracks_played:c.total_tracks_played+1,total_listening_minutes:c.total_listening_minutes+Math.round(b/60)}).eq("user_id",a);if(n)throw n;if(j.length>0){let b=j.map(b=>({user_id:a,achievement_id:b.id}));await d.from("user_achievements").insert(b)}return{newAchievements:j,leveledUp:k}}async function h(a){let b=await f(a),{newAchievements:c,leveledUp:g,newXp:h}=(0,e.recordLike)(b),{data:i,error:j}=await d.from("user_gamification").update({xp:h,level:g?b.level+1:b.level,total_likes:b.total_likes+1}).eq("user_id",a);if(j)throw j;if(c.length>0){let b=c.map(b=>({user_id:a,achievement_id:b.id}));await d.from("user_achievements").insert(b)}return{newAchievements:c,leveledUp:g}}async function i(a){let b=await f(a),{newAchievements:c,leveledUp:g,newXp:h}=(0,e.recordPlaylistCreate)(b),{data:i,error:j}=await d.from("user_gamification").update({xp:h,level:g?b.level+1:b.level,total_playlists:b.total_playlists+1}).eq("user_id",a);if(j)throw j;if(c.length>0){let b=c.map(b=>({user_id:a,achievement_id:b.id}));await d.from("user_achievements").insert(b)}return{newAchievements:c,leveledUp:g}}},82197:(a,b,c)=>{"use strict";c.d(b,{$S:()=>p,eI:()=>r,recordLike:()=>m,recordPlay:()=>l,recordPlaylistCreate:()=>n,sH:()=>q,uL:()=>o});var d=c(75115),e=c.n(d);let f="user_gamification_data",g=[0,100,250,500,800,1200,1700,2300,3e3,4e3,5200,6500,8e3,1e4,12500,15500,19e3,23e3,28e3,35e3],h=[{id:"first-play",title:"First Note",description:"Play your first track",icon:"play",category:"listening",requirement:1},{id:"tracks-10",title:"Getting Started",description:"Play 10 tracks",icon:"music",category:"listening",requirement:10},{id:"tracks-50",title:"Music Lover",description:"Play 50 tracks",icon:"headphones",category:"listening",requirement:50},{id:"tracks-100",title:"Audiophile",description:"Play 100 tracks",icon:"disc",category:"listening",requirement:100},{id:"minutes-60",title:"Hour Power",description:"Listen for 60 minutes",icon:"clock",category:"listening",requirement:60},{id:"minutes-600",title:"Marathon Listener",description:"Listen for 10 hours",icon:"timer",category:"listening",requirement:600},{id:"streak-3",title:"Hat Trick",description:"3-day listening streak",icon:"flame",category:"streak",requirement:3},{id:"streak-7",title:"Weekly Warrior",description:"7-day listening streak",icon:"fire",category:"streak",requirement:7},{id:"streak-30",title:"Monthly Master",description:"30-day listening streak",icon:"trophy",category:"streak",requirement:30},{id:"likes-5",title:"Picky Listener",description:"Like 5 tracks",icon:"heart",category:"collection",requirement:5},{id:"likes-25",title:"Curator",description:"Like 25 tracks",icon:"heart-filled",category:"collection",requirement:25},{id:"likes-100",title:"Tastemaker",description:"Like 100 tracks",icon:"star",category:"collection",requirement:100},{id:"playlist-1",title:"DJ Beginner",description:"Create your first playlist",icon:"list-music",category:"collection",requirement:1},{id:"playlist-5",title:"Playlist Pro",description:"Create 5 playlists",icon:"list-plus",category:"collection",requirement:5},{id:"download-1",title:"Offline Explorer",description:"Download your first track",icon:"download",category:"collection",requirement:1},{id:"download-10",title:"On-the-Go",description:"Download 10 tracks",icon:"download-cloud",category:"collection",requirement:10},{id:"share-1",title:"Spreading the Word",description:"Share your first track",icon:"share",category:"social",requirement:1},{id:"share-10",title:"Socialite",description:"Share 10 tracks",icon:"share-2",category:"social",requirement:10}];async function i(){return await e().getItem(f)||{xp:0,level:1,streak:0,longest_streak:0,last_listened_date:null,total_tracks_played:0,total_listening_minutes:0,total_likes:0,total_playlists:0,total_downloads:0,total_shares:0,unlocked_achievements:new Set}}async function j(a){await e().setItem(f,a)}async function k(a,b){let c=await i(),d=c.level;b(c);let e=c.xp+a;c.xp=e;let f=function(a){for(let b=g.length-1;b>=0;b--)if(a>=g[b])return b+1;return 1}(e),k=f>d;c.level=f;let l=function(a){let b=[];for(let c of h){if(a.unlocked_achievements.has(c.id))continue;let d=0;switch(c.category){case"listening":d=c.id.includes("tracks")?a.total_tracks_played:c.id.includes("minutes")?a.total_listening_minutes:a.total_tracks_played;break;case"streak":d=a.streak;break;case"collection":c.id.includes("like")?d=a.total_likes:c.id.includes("playlist")?d=a.total_playlists:c.id.includes("download")&&(d=a.total_downloads);break;case"social":d=a.total_shares}d>=c.requirement&&(b.push(c),a.unlocked_achievements.add(c.id))}return b}(c);return await j(c),{newAchievements:l,leveledUp:k,newXp:e,userState:c}}function l(a=0){return k(10,b=>{b.total_tracks_played+=1,b.total_listening_minutes+=Math.round(a/60);let c=new Date().toDateString();if(b.last_listened_date!==c){let a=new Date(Date.now()-864e5).toDateString();b.last_listened_date===a?b.streak+=1:b.streak=1,b.last_listened_date=c,b.streak>b.longest_streak&&(b.longest_streak=b.streak)}})}function m(){return k(5,a=>{a.total_likes+=1})}function n(){return k(25,a=>{a.total_playlists+=1})}let o=i;function p(a){return a>=g.length?2*g[g.length-1]:g[a]??g[0]}function q(a,b){let c=g[b-1]||0,d=p(b);return d===c?0:Math.min(Math.max((a-c)/(d-c)*100,0),100)}function r(a){let b=["Newbie","Listener","Fan","Enthusiast","Devotee","Connoisseur","Expert","Master","Legend","Virtuoso","Maestro","Prodigy","Savant","Luminary","Icon","Phenom","Oracle","Titan","Deity","Transcendent"];return b[Math.min(a-1,b.length-1)]||"Transcendent"}}};